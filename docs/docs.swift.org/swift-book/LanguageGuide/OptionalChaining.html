

<!DOCTYPE html>



<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta name="author" content="Apple Inc." />
    <meta name="viewport" content="width=device-width initial-scale=1" />
    
    <title>Optional Chaining — The Swift Programming Language (Swift 5.5)</title>
    
    <link rel="license" href="/LICENSE.txt" />
    <link rel="stylesheet" media="all" href="../static/stylesheets/application.css" />
    <link rel="stylesheet" media="all" href="../static/stylesheets/tspl.css" />
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png" />
    <link rel="mask-icon" href="/assets/images/icon-swift.svg" color="#F05339" /> 
  </head>
  <body>


<nav role="navigation">
    <header role="banner">
      <h1 id="logo">
        <a href="https://swift.org/" title="Swift.org" role="img" aria-label="Swift.org">
          Swift.org
        </a>
      </h1>
    </header>

    <div id="menu-toggle" class="menu-toggle open"></div>

    <h2>The Swift Programming Language<div>Swift 5.5</div></h2>

    <ul>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"><span class="enstr">Welcome to Swift</span><!--end_enstr-->
<span class="jpstr">
スウィフトにようこそ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="TheBasics.html"><span class="enstr">Language Guide</span><!--end_enstr-->
<span class="jpstr">
言語ガイド
</span><!--end_jpstr-->
</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="TheBasics.html"><span class="enstr">The Basics</span><!--end_enstr-->
<span class="jpstr">
基本
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="BasicOperators.html"><span class="enstr">Basic Operators</span><!--end_enstr-->
<span class="jpstr">
基本の演算子
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="StringsAndCharacters.html"><span class="enstr">Strings and Characters</span><!--end_enstr-->
<span class="jpstr">
文字列と文字
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="CollectionTypes.html"><span class="enstr">Collection Types</span><!--end_enstr-->
<span class="jpstr">
コレクション型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="ControlFlow.html"><span class="enstr">Control Flow</span><!--end_enstr-->
<span class="jpstr">
制御の流れ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Functions.html"><span class="enstr">Functions</span><!--end_enstr-->
<span class="jpstr">
関数
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Closures.html"><span class="enstr">Closures</span><!--end_enstr-->
<span class="jpstr">
クロージャ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Enumerations.html"><span class="enstr">Enumerations</span><!--end_enstr-->
<span class="jpstr">
列挙
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClassesAndStructures.html"><span class="enstr">Structures and Classes</span><!--end_enstr-->
<span class="jpstr">
構造体とクラス
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Properties.html"><span class="enstr">Properties</span><!--end_enstr-->
<span class="jpstr">
プロパティ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Methods.html"><span class="enstr">Methods</span><!--end_enstr-->
<span class="jpstr">
メソッド
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Subscripts.html"><span class="enstr">Subscripts</span><!--end_enstr-->
<span class="jpstr">
添え字
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Inheritance.html"><span class="enstr">Inheritance</span><!--end_enstr-->
<span class="jpstr">
継承
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Initialization.html"><span class="enstr">Initialization</span><!--end_enstr-->
<span class="jpstr">
初期化
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deinitialization.html"><span class="enstr">Deinitialization</span><!--end_enstr-->
<span class="jpstr">
デイニシャライズ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><span class="enstr">Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="ErrorHandling.html"><span class="enstr">Error Handling</span><!--end_enstr-->
<span class="jpstr">
エラーの処理
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Concurrency.html"><span class="enstr">Concurrency</span><!--end_enstr-->
<span class="jpstr">
並行性
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="TypeCasting.html"><span class="enstr">Type Casting</span><!--end_enstr-->
<span class="jpstr">
型キャスト
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="NestedTypes.html"><span class="enstr">Nested Types</span><!--end_enstr-->
<span class="jpstr">
入れ子にされた型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Extensions.html"><span class="enstr">Extensions</span><!--end_enstr-->
<span class="jpstr">
拡張
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Protocols.html"><span class="enstr">Protocols</span><!--end_enstr-->
<span class="jpstr">
プロトコル
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Generics.html"><span class="enstr">Generics</span><!--end_enstr-->
<span class="jpstr">
総称体
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="OpaqueTypes.html"><span class="enstr">Opaque Types</span><!--end_enstr-->
<span class="jpstr">
不透明型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AutomaticReferenceCounting.html"><span class="enstr">Automatic Reference Counting</span><!--end_enstr-->
<span class="jpstr">
自動参照カウント
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="MemorySafety.html"><span class="enstr">Memory Safety</span><!--end_enstr-->
<span class="jpstr">
メモリ安全
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AccessControl.html"><span class="enstr">Access Control</span><!--end_enstr-->
<span class="jpstr">
アクセス制御
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AdvancedOperators.html"><span class="enstr">Advanced Operators</span><!--end_enstr-->
<span class="jpstr">
先進の演算子
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ReferenceManual/AboutTheLanguageReference.html"><span class="enstr">Language Reference</span><!--end_enstr-->
<span class="jpstr">
言語リファレンス
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RevisionHistory/RevisionHistory.html"><span class="enstr">Revision History</span><!--end_enstr-->
<span class="jpstr">
改訂履歴
</span><!--end_jpstr-->
</a></li>
</ul>

    <li class="toctree-l1 return"><a class="reference internal" href="../../../index.html">← Go to Index</a></li>
    </ul>
</nav>




<main role="main">
    <article class="page">
        <menu id="bashful" type="toolbar">
          <div class="inner">
            <menuitem id="jump_to" class="menu-bar-item closed">
            <span id="jump_to_toggle">On This Page</span>
            <div class="chevron">
                <div class="chevy chevron-left"></div>
                <div class="chevy chevron-right"></div>
            </div>
            <menu type="list" class="details">
                <ul>
<li><a class="reference internal" href="#"><span class="enstr">Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖
</span><!--end_jpstr-->
</a><ul>
<li><a class="reference internal" href="#ID246"><span class="enstr">Optional Chaining as an Alternative to Forced Unwrapping</span><!--end_enstr-->
<span class="jpstr">
強制アンラップに代わるものとしてのオプショナル連鎖
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID247"><span class="enstr">Defining Model Classes for Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖のモデル・クラスを定義する
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID248"><span class="enstr">Accessing Properties Through Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通してプロパティにアクセスする
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID249"><span class="enstr">Calling Methods Through Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通してメソッドを呼ぶ
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID250"><span class="enstr">Accessing Subscripts Through Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通して添え字にアクセスする
</span><!--end_jpstr-->
</a><ul>
<li><a class="reference internal" href="#ID251"><span class="enstr">Accessing Subscripts of Optional Type</span><!--end_enstr-->
<span class="jpstr">
オプショナル型の添え字にアクセスする
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ID252"><span class="enstr">Linking Multiple Levels of Chaining</span><!--end_enstr-->
<span class="jpstr">
連鎖の複数の階層を結ぶ
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID253"><span class="enstr">Chaining on Methods with Optional Return Values</span><!--end_enstr-->
<span class="jpstr">
オプショナルの戻り値をもつメソッド上で連鎖する
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
</ul>

            </menu>
            </menuitem>
          </div>
        </menu>

        
  <div class="section" id="optional-chaining">
<h1><span class="enstr">Optional Chaining<a class="headerlink" href="#optional-chaining" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖<a class="headerlink" href="#optional-chaining" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h1>
<p><span class="enstr"><em>Optional chaining</em> is a process for querying and calling properties, methods, and subscripts on an optional that might currently be <code class="docutils literal notranslate"><span class="pre">nil</span></code>. If the optional contains a value, the property, method, or subscript call succeeds; if the optional is <code class="docutils literal notranslate"><span class="pre">nil</span></code>, the property, method, or subscript call returns <code class="docutils literal notranslate"><span class="pre">nil</span></code>. Multiple queries can be chained together, and the entire chain fails gracefully if any link in the chain is <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</span><!--end_enstr-->
<span class="jpstr">
<em>オプショナル連鎖</em>は、現時点で<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるかもしれないオプショナル上での、プロパティ、メソッド、および添え字への問い合わせや呼び出しのための処理です。そのオプショナルが値を含むならば、プロパティ、メソッド、または添え字の呼び出しは成功します；そのオプショナルが<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるならば、プロパティ、メソッド、または添え字の呼び出しは<code class="docutils literal notranslate"><span class="pre">nil</span></code>を返します。複数の問い合わせが一緒に鎖で繋げられることができます、そして連鎖の中のどれかの輪が<code class="docutils literal notranslate"><span class="pre">nil</span></code>ならば、その連鎖全体がいさぎよく失敗します。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">Optional chaining in Swift is similar to messaging <code class="docutils literal notranslate"><span class="pre">nil</span></code> in Objective-C, but in a way that works for any type, and that can be checked for success or failure.</span><!--end_enstr-->
<span class="jpstr">
スウィフトにおけるオプショナル連鎖は、どんな型のためにでも働きそして成功か失敗を確認されることができるというようなことを除いて、Objective-Cにおける<code class="docutils literal notranslate"><span class="pre">nil</span></code>にメッセージを送ることに似ています。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID246">
<h2><span class="enstr">Optional Chaining as an Alternative to Forced Unwrapping<a class="headerlink" href="#ID246" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
強制アンラップに代わるものとしてのオプショナル連鎖<a class="headerlink" href="#ID246" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You specify optional chaining by placing a question mark (<code class="docutils literal notranslate"><span class="pre">?</span></code>) after the optional value on which you wish to call a property, method or subscript if the optional is non-<code class="docutils literal notranslate"><span class="pre">nil</span></code>. This is very similar to placing an exclamation point (<code class="docutils literal notranslate"><span class="pre">!</span></code>) after an optional value to force the unwrapping of its value. The main difference is that optional chaining fails gracefully when the optional is <code class="docutils literal notranslate"><span class="pre">nil</span></code>, whereas forced unwrapping triggers a runtime error when the optional is <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</span><!--end_enstr-->
<span class="jpstr">
あなたはオプショナル連鎖を、そのオプショナルが<code class="docutils literal notranslate"><span class="pre">nil</span></code>で無いならばあなたがプロパティ、メソッド、または添え字を呼び出したいオプショナルの値の後に疑問符（<code class="docutils literal notranslate"><span class="pre">?</span></code>）を置くことによって指定します。これは、その値を強制アンラップするためにオプショナルの値の後に感嘆符（<code class="docutils literal notranslate"><span class="pre">!</span></code>）を置くことに非常に似ています。大きな違いは、オプショナル連鎖はそのオプショナルが<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるとき潔く失敗します、だけれども強制アンラップはそのオプショナルが<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるとき実行時エラーの引き金となります。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">To reflect the fact that optional chaining can be called on a <code class="docutils literal notranslate"><span class="pre">nil</span></code> value, the result of an optional chaining call is always an optional value, even if the property, method, or subscript you are querying returns a non-optional value. You can use this optional return value to check whether the optional chaining call was successful (the returned optional contains a value), or didn’t succeed due to a <code class="docutils literal notranslate"><span class="pre">nil</span></code> value in the chain (the returned optional value is <code class="docutils literal notranslate"><span class="pre">nil</span></code>).</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖は<code class="docutils literal notranslate"><span class="pre">nil</span></code>値上で呼ばれることができるという事実を反映するために、オプショナル連鎖呼び出しの結果は、たとえあなたが問い合わせているプロパティ、メソッド、または添え字が非オプショナルの値を返すとしても、常にオプショナルの値です。あなたは、このオプショナルの戻り値を使って、オプショナル連鎖呼び出しが成功した（返されたオプショナルが値を含む）か、あるいは連鎖の中の<code class="docutils literal notranslate"><span class="pre">nil</span></code>値のために成功しなかった（返されたオプショナルの値が<code class="docutils literal notranslate"><span class="pre">nil</span></code>である）かどうか確認することができます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Specifically, the result of an optional chaining call is of the same type as the expected return value, but wrapped in an optional. A property that normally returns an <code class="docutils literal notranslate"><span class="pre">Int</span></code> will return an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> when accessed through optional chaining.</span><!--end_enstr-->
<span class="jpstr">
具体的には、オプショナル連鎖の呼び出しの結果は、期待される戻り値と同じ型ですが、オプショナルの中にラップされています。通常は<code class="docutils literal notranslate"><span class="pre">Int</span></code>を返すプロパティは、オプショナル連鎖を通してアクセスされるとき<code class="docutils literal notranslate"><span class="pre">Int?</span></code>を返します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The next several code snippets demonstrate how optional chaining differs from forced unwrapping and enables you to check for success.</span><!--end_enstr-->
<span class="jpstr">
次のいくつかのコード切れっぱしは、どのようにオプショナル連鎖が強制アンラップと異なるか、そして成功をどのようにあなたが確認できるかを例示します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">First, two classes called <code class="docutils literal notranslate"><span class="pre">Person</span></code> and <code class="docutils literal notranslate"><span class="pre">Residence</span></code> are defined:</span><!--end_enstr-->
<span class="jpstr">
最初に、<code class="docutils literal notranslate"><span class="pre">Person</span></code>と<code class="docutils literal notranslate"><span class="pre">Residence</span></code>（個人と邸宅）と呼ばれる２つのクラスが定義されます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">class</span> <span class="nv">Person</span> {
</li><li>    <span class="k">var</span> <span class="nv">residence</span>: <span class="nc">Residence</span>?
</li><li>}
</li><li>
</li><li><span class="k">class</span> <span class="nv">Residence</span> {
</li><li>    <span class="k">var</span> <span class="nv">numberOfRooms</span> = <span class="m">1</span>
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr"><code class="docutils literal notranslate"><span class="pre">Residence</span></code> instances have a single <code class="docutils literal notranslate"><span class="pre">Int</span></code> property called <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>, with a default value of <code class="docutils literal notranslate"><span class="pre">1</span></code>. <code class="docutils literal notranslate"><span class="pre">Person</span></code> instances have an optional <code class="docutils literal notranslate"><span class="pre">residence</span></code> property of type <code class="docutils literal notranslate"><span class="pre">Residence?</span></code>.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスは、<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>と呼ばれる省略時の値<code class="docutils literal notranslate"><span class="pre">1</span></code>を持つ<code class="docutils literal notranslate"><span class="pre">Int</span></code>プロパティただひとつを持ちます。<code class="docutils literal notranslate"><span class="pre">Person</span></code>インスタンスは、型<code class="docutils literal notranslate"><span class="pre">Residence?</span></code>のオプショナル<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティを持ちます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">If you create a new <code class="docutils literal notranslate"><span class="pre">Person</span></code> instance, its <code class="docutils literal notranslate"><span class="pre">residence</span></code> property is default initialized to <code class="docutils literal notranslate"><span class="pre">nil</span></code>, by virtue of being optional. In the code below, <code class="docutils literal notranslate"><span class="pre">john</span></code> has a <code class="docutils literal notranslate"><span class="pre">residence</span></code> property value of <code class="docutils literal notranslate"><span class="pre">nil</span></code>:</span><!--end_enstr-->
<span class="jpstr">
あなたが新しい<code class="docutils literal notranslate"><span class="pre">Person</span></code>インスタンスをつくるならば、その<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティは、オプショナルである長所によって、省略時で<code class="docutils literal notranslate"><span class="pre">nil</span></code>に初期化されます。下記のコードにおいて、<code class="docutils literal notranslate"><span class="pre">john</span></code>は<code class="docutils literal notranslate"><span class="pre">nil</span></code>の<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティ値を持ちます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">john</span> = <span class="nv">Person</span>()
</li></ol></div></div></div>
<p><span class="enstr">If you try to access the <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> property of this person’s <code class="docutils literal notranslate"><span class="pre">residence</span></code>, by placing an exclamation point after <code class="docutils literal notranslate"><span class="pre">residence</span></code> to force the unwrapping of its value, you trigger a runtime error, because there’s no <code class="docutils literal notranslate"><span class="pre">residence</span></code> value to unwrap:</span><!--end_enstr-->
<span class="jpstr">
あなたがこの人の<code class="docutils literal notranslate"><span class="pre">residence</span></code>の<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>プロパティに、その値を強制アンラップするため<code class="docutils literal notranslate"><span class="pre">residence</span></code>の後に感嘆符を置くことによって、アクセスしようとするならば、あなたは実行時エラーを引き起こします、なぜなら、アンラップする<code class="docutils literal notranslate"><span class="pre">residence</span></code>値はないからです：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">roomCount</span> = <span class="nv">john</span>.<span class="nv">residence</span>!.<span class="nv">numberOfRooms</span>
</li><li><span class="c"><span class="enstr">// this triggers a runtime error</span><!--end_enstr--><span class="jpstr">（これは、実行時エラーの引き金となります）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">The code above succeeds when <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> has a non-<code class="docutils literal notranslate"><span class="pre">nil</span></code> value and will set <code class="docutils literal notranslate"><span class="pre">roomCount</span></code> to an <code class="docutils literal notranslate"><span class="pre">Int</span></code> value containing the appropriate number of rooms. However, this code always triggers a runtime error when <code class="docutils literal notranslate"><span class="pre">residence</span></code> is <code class="docutils literal notranslate"><span class="pre">nil</span></code>, as illustrated above.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>が非<code class="docutils literal notranslate"><span class="pre">nil</span></code>値を持って、<code class="docutils literal notranslate"><span class="pre">roomCount</span></code>を部屋の適当な数を含んでいる<code class="docutils literal notranslate"><span class="pre">Int</span></code>値に設定するとき、上のコードは成功します。しかし、<code class="docutils literal notranslate"><span class="pre">residence</span></code>が<code class="docutils literal notranslate"><span class="pre">nilの</span></code>とき、上で説明するように、このコードは常に実行時エラーの引き金となります。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Optional chaining provides an alternative way to access the value of <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>. To use optional chaining, use a question mark in place of the exclamation point:</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖は、<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>の値にアクセスする代わりの方法を提供します。オプショナル連鎖を使用するために、感嘆符の代わりに疑問符を使ってください：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">roomCount</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">numberOfRooms</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"John's residence has </span>\<span class="p">(</span><span class="nv">roomCount</span><span class="p">)</span><span class="s"> room(s)."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the number of rooms."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "Unable to retrieve the number of rooms."</span><!--end_enstr--><span class="jpstr">（「部屋の数を取り出すことができない」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">This tells Swift to “chain” on the optional <code class="docutils literal notranslate"><span class="pre">residence</span></code> property and to retrieve the value of <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> if <code class="docutils literal notranslate"><span class="pre">residence</span></code> exists.</span><!--end_enstr-->
<span class="jpstr">
これはスウィフトに、オプショナルの<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティの上に「繋げて」、そして<code class="docutils literal notranslate"><span class="pre">residence</span></code>が存在するならば<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>の値を取り出すように言います。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Because the attempt to access <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> has the potential to fail, the optional chaining attempt returns a value of type <code class="docutils literal notranslate"><span class="pre">Int?</span></code>, or “optional <code class="docutils literal notranslate"><span class="pre">Int</span></code>”. When <code class="docutils literal notranslate"><span class="pre">residence</span></code> is <code class="docutils literal notranslate"><span class="pre">nil</span></code>, as in the example above, this optional <code class="docutils literal notranslate"><span class="pre">Int</span></code> will also be <code class="docutils literal notranslate"><span class="pre">nil</span></code>, to reflect the fact that it was not possible to access <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>. The optional <code class="docutils literal notranslate"><span class="pre">Int</span></code> is accessed through optional binding to unwrap the integer and assign the non-optional value to the <code class="docutils literal notranslate"><span class="pre">roomCount</span></code> constant.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>にアクセスする試みは失敗する可能性があるので、オプショナル連鎖は型<code class="docutils literal notranslate"><span class="pre">Int?</span></code>の値、すなわち「オプショナルの<code class="docutils literal notranslate"><span class="pre">Int</span></code>」、を返すことを試みます。<code class="docutils literal notranslate"><span class="pre">residence</span></code>が<code class="docutils literal notranslate"><span class="pre">nil</span></code>のとき、上の例の場合のように、このオプショナルの<code class="docutils literal notranslate"><span class="pre">Int</span></code>はまた<code class="docutils literal notranslate"><span class="pre">nil</span></code>になり、<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>にアクセスすることは可能でなかったという事実を反映します。オプショナルの<code class="docutils literal notranslate"><span class="pre">Int</span></code>は、オプショナル束縛を通してアクセスされることで、整数をアンラップして取り出して、その非オプショナル値を<code class="docutils literal notranslate"><span class="pre">roomCount</span></code>定数へ割り当てます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Note that this is true even though <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> is a non-optional <code class="docutils literal notranslate"><span class="pre">Int</span></code>. The fact that it’s queried through an optional chain means that the call to <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> will always return an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> instead of an <code class="docutils literal notranslate"><span class="pre">Int</span></code>.</span><!--end_enstr-->
<span class="jpstr">
たとえ<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>が非オプショナルの<code class="docutils literal notranslate"><span class="pre">Int</span></code>であるとしても、これが当てはまることに注意してください。それがオプショナル連鎖によって問い合わせられるという事実は、<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>への呼び出しが常に<code class="docutils literal notranslate"><span class="pre">Int?</span></code>を返すことを意味します、<code class="docutils literal notranslate"><span class="pre">Int</span></code>ではなく。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">You can assign a <code class="docutils literal notranslate"><span class="pre">Residence</span></code> instance to <code class="docutils literal notranslate"><span class="pre">john.residence</span></code>, so that it no longer has a <code class="docutils literal notranslate"><span class="pre">nil</span></code> value:</span><!--end_enstr-->
<span class="jpstr">
あなたは<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>に<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスを代入することができます、それによってそれはもはや<code class="docutils literal notranslate"><span class="pre">nil</span></code>値を持ちません：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="nv">john</span>.<span class="nv">residence</span> = <span class="nv">Residence</span>()
</li></ol></div></div></div>
<p><span class="enstr"><code class="docutils literal notranslate"><span class="pre">john.residence</span></code> now contains an actual <code class="docutils literal notranslate"><span class="pre">Residence</span></code> instance, rather than <code class="docutils literal notranslate"><span class="pre">nil</span></code>. If you try to access <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> with the same optional chaining as before, it will now return an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> that contains the default <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> value of <code class="docutils literal notranslate"><span class="pre">1</span></code>:</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>は、今では実際の<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスを含みます、<code class="docutils literal notranslate"><span class="pre">nil</span></code>ではなく。あなたが前と同じオプショナル連鎖で<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>にアクセスしようとするならば、それは今では省略時の<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>値の<code class="docutils literal notranslate"><span class="pre">1</span></code>を含む<code class="docutils literal notranslate"><span class="pre">Int?</span></code>を返します：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">roomCount</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">numberOfRooms</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"John's residence has </span>\<span class="p">(</span><span class="nv">roomCount</span><span class="p">)</span><span class="s"> room(s)."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the number of rooms."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "John's residence has 1 room(s)."</span><!--end_enstr--><span class="jpstr">（「ジョンの邸宅には１部屋ある」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
</div>
<div class="section" id="ID247">
<h2><span class="enstr">Defining Model Classes for Optional Chaining<a class="headerlink" href="#ID247" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖のモデル・クラスを定義する<a class="headerlink" href="#ID247" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You can use optional chaining with calls to properties, methods, and subscripts that are more than one level deep. This enables you to drill down into subproperties within complex models of interrelated types, and to check whether it’s possible to access properties, methods, and subscripts on those subproperties.</span><!--end_enstr-->
<span class="jpstr">
あなたは、深さ１階層以上であるプロパティ、メソッド、そして添え字への呼び出しでオプショナル連鎖を使うことができます。これはあなたに、相互に関係づけられた型である複雑なモデルの内部の下位情報に掘り下げていくこと、そしてそれらの下位情報上でプロパティ、メソッド、そして添え字にアクセスすることが可能であるかどうか確認することを可能にします。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The code snippets below define four model classes for use in several subsequent examples, including examples of multilevel optional chaining. These classes expand upon the <code class="docutils literal notranslate"><span class="pre">Person</span></code> and <code class="docutils literal notranslate"><span class="pre">Residence</span></code> model from above by adding a <code class="docutils literal notranslate"><span class="pre">Room</span></code> and <code class="docutils literal notranslate"><span class="pre">Address</span></code> class, with associated properties, methods, and subscripts.</span><!--end_enstr-->
<span class="jpstr">
下のコード切れっぱしは、複数階層のオプショナル連鎖の例を含む以降のいくつかの例のために、４つのモデル・クラスを定義します。これらのクラスは、関連するプロパティ、メソッド、そして添え字とともに<code class="docutils literal notranslate"><span class="pre">Room</span></code>と<code class="docutils literal notranslate"><span class="pre">Address</span></code>クラスを加えることによって、上記の<code class="docutils literal notranslate"><span class="pre">Person</span></code>と<code class="docutils literal notranslate"><span class="pre">Residence</span></code>モデルを拡張します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">Person</span></code> class is defined in the same way as before:</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Person</span></code>クラスは、前の通りに定義されます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">class</span> <span class="nv">Person</span> {
</li><li>    <span class="k">var</span> <span class="nv">residence</span>: <span class="nc">Residence</span>?
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">Residence</span></code> class is more complex than before. This time, the <code class="docutils literal notranslate"><span class="pre">Residence</span></code> class defines a variable property called <code class="docutils literal notranslate"><span class="pre">rooms</span></code>, which is initialized with an empty array of type <code class="docutils literal notranslate"><span class="pre">[Room]</span></code>:</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Residence</span></code>クラスは、前より複雑です。今度は、<code class="docutils literal notranslate"><span class="pre">Residence</span></code>クラスは<code class="docutils literal notranslate"><span class="pre">rooms</span></code>と呼ばれる変数プロパティを定義します、それは、型<code class="docutils literal notranslate"><span class="pre">[Room]</span></code>の空の配列で初期化されます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">class</span> <span class="nv">Residence</span> {
</li><li>    <span class="k">var</span> <span class="nv">rooms</span>: [<span class="nc">Room</span>] = []
</li><li>    <span class="k">var</span> <span class="nv">numberOfRooms</span>: <span class="nc">Int</span> {
</li><li>        <span class="k">return</span> <span class="nv">rooms</span>.<span class="nv">count</span>
</li><li>    }
</li><li>    <span class="k">subscript</span>(<span class="nv">i</span>: <span class="nc">Int</span>) -&gt; <span class="nc">Room</span> {
</li><li>        <span class="k">get</span> {
</li><li>            <span class="k">return</span> <span class="nv">rooms</span>[<span class="nv">i</span>]
</li><li>        }
</li><li>        <span class="k">set</span> {
</li><li>            <span class="nv">rooms</span>[<span class="nv">i</span>] = <span class="nv">newValue</span>
</li><li>        }
</li><li>    }
</li><li>    <span class="k">func</span> <span class="nv">printNumberOfRooms</span>() {
</li><li>        <span class="nv">print</span>(<span class="s">"The number of rooms is </span>\<span class="p">(</span><span class="nv">numberOfRooms</span><span class="p">)</span><span class="s">"</span>)
</li><li>    }
</li><li>    <span class="k">var</span> <span class="nv">address</span>: <span class="nc">Address</span>?
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">Because this version of <code class="docutils literal notranslate"><span class="pre">Residence</span></code> stores an array of <code class="docutils literal notranslate"><span class="pre">Room</span></code> instances, its <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> property is implemented as a computed property, not a stored property. The computed <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> property simply returns the value of the <code class="docutils literal notranslate"><span class="pre">count</span></code> property from the <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Residence</span></code>のこの改作が<code class="docutils literal notranslate"><span class="pre">Room</span></code>インスタンスの配列を格納するので、その<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>プロパティは計算プロパティとして実装されます、格納プロパティではなく。計算<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>プロパティは、単に<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列から<code class="docutils literal notranslate"><span class="pre">count</span></code>プロパティの値を返します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">As a shortcut to accessing its <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array, this version of <code class="docutils literal notranslate"><span class="pre">Residence</span></code> provides a read-write subscript that provides access to the room at the requested index in the <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array.</span><!--end_enstr-->
<span class="jpstr">
その<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列にアクセスすることへの近道として、<code class="docutils literal notranslate"><span class="pre">Residence</span></code>のこの版は読み出し専用の添え字を提供します、それは、<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列の中の要求されたインデックスでの部屋へのアクセスを提供します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">This version of <code class="docutils literal notranslate"><span class="pre">Residence</span></code> also provides a method called <code class="docutils literal notranslate"><span class="pre">printNumberOfRooms</span></code>, which simply prints the number of rooms in the residence.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Residence</span></code>のこの版も<code class="docutils literal notranslate"><span class="pre">printNumberOfRooms</span></code>と呼ばれるメソッドを提供します、それは、単にその住居の部屋数を出力します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Finally, <code class="docutils literal notranslate"><span class="pre">Residence</span></code> defines an optional property called <code class="docutils literal notranslate"><span class="pre">address</span></code>, with a type of <code class="docutils literal notranslate"><span class="pre">Address?</span></code>. The <code class="docutils literal notranslate"><span class="pre">Address</span></code> class type for this property is defined below.</span><!--end_enstr-->
<span class="jpstr">
最終的に、<code class="docutils literal notranslate"><span class="pre">Residence</span></code>は<code class="docutils literal notranslate"><span class="pre">address</span></code>と呼ばれるオプショナルのプロパティを、<code class="docutils literal notranslate"><span class="pre">Address?</span></code>の型で定義します。このプロパティのための<code class="docutils literal notranslate"><span class="pre">Address</span></code>クラス型は、下で定義されます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">Room</span></code> class used for the <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array is a simple class with one property called <code class="docutils literal notranslate"><span class="pre">name</span></code>, and an initializer to set that property to a suitable room name:</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列のために使用される<code class="docutils literal notranslate"><span class="pre">Room</span></code>クラスは、<code class="docutils literal notranslate"><span class="pre">name</span></code>と呼ばれる１つのプロパティ、そしてそのプロパティを適切な部屋名に設定するイニシャライザをもつ単純なクラスです：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">class</span> <span class="nv">Room</span> {
</li><li>    <span class="k">let</span> <span class="nv">name</span>: <span class="nc">String</span>
</li><li>    <span class="k">init</span>(<span class="nv">name</span>: <span class="nc">String</span>) { <span class="k">self</span>.<span class="nv">name</span> = <span class="nv">name</span> }
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The final class in this model is called <code class="docutils literal notranslate"><span class="pre">Address</span></code>. This class has three optional properties of type <code class="docutils literal notranslate"><span class="pre">String?</span></code>. The first two properties, <code class="docutils literal notranslate"><span class="pre">buildingName</span></code> and <code class="docutils literal notranslate"><span class="pre">buildingNumber</span></code>, are alternative ways to identify a particular building as part of an address. The third property, <code class="docutils literal notranslate"><span class="pre">street</span></code>, is used to name the street for that address:</span><!--end_enstr-->
<span class="jpstr">
このモデルの中の最後のクラスは、<code class="docutils literal notranslate"><span class="pre">Address</span></code>と呼ばれています。このクラスは、型<code class="docutils literal notranslate"><span class="pre">String?</span></code>の３つのオプショナルのプロパティを持ちます。最初の２つのプロパティ、<code class="docutils literal notranslate"><span class="pre">buildingName</span></code>と<code class="docutils literal notranslate"><span class="pre">buildingNumber</span></code>は、アドレスの一部として特定の建物を同定するそれぞれ代替の方法です。第３のプロパティ、<code class="docutils literal notranslate"><span class="pre">street</span></code>は、そのアドレスの通りのために使われます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">class</span> <span class="nv">Address</span> {
</li><li>    <span class="k">var</span> <span class="nv">buildingName</span>: <span class="nc">String</span>?
</li><li>    <span class="k">var</span> <span class="nv">buildingNumber</span>: <span class="nc">String</span>?
</li><li>    <span class="k">var</span> <span class="nv">street</span>: <span class="nc">String</span>?
</li><li>    <span class="k">func</span> <span class="nv">buildingIdentifier</span>() -&gt; <span class="nc">String</span>? {
</li><li>        <span class="k">if</span> <span class="k">let</span> <span class="nv">buildingNumber</span> = <span class="nv">buildingNumber</span>, <span class="k">let</span> <span class="nv">street</span> = <span class="nv">street</span> {
</li><li>            <span class="k">return</span> <span class="s">"</span>\<span class="p">(</span><span class="nv">buildingNumber</span><span class="p">)</span><span class="s"> </span>\<span class="p">(</span><span class="nv">street</span><span class="p">)</span><span class="s">"</span>
</li><li>        } <span class="k">else</span> <span class="k">if</span> <span class="nv">buildingName</span> != <span class="k">nil</span> {
</li><li>            <span class="k">return</span> <span class="nv">buildingName</span>
</li><li>        } <span class="k">else</span> {
</li><li>            <span class="k">return</span> <span class="k">nil</span>
</li><li>        }
</li><li>    }
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">Address</span></code> class also provides a method called <code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code>, which has a return type of <code class="docutils literal notranslate"><span class="pre">String?</span></code>. This method checks the properties of the address and returns <code class="docutils literal notranslate"><span class="pre">buildingName</span></code> if it has a value, or <code class="docutils literal notranslate"><span class="pre">buildingNumber</span></code> concatenated with <code class="docutils literal notranslate"><span class="pre">street</span></code> if both have values, or <code class="docutils literal notranslate"><span class="pre">nil</span></code> otherwise.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Address</span></code>クラスはまた、<code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code>と呼ばれるメソッドを提供します、それは、<code class="docutils literal notranslate"><span class="pre">String?</span></code>の戻り型を持ちます。このメソッドは、アドレスのプロパティを調べて、それが値を持つならば<code class="docutils literal notranslate"><span class="pre">buildingName</span></code>を、または両方とも値を持つならば<code class="docutils literal notranslate"><span class="pre">buildingNumber</span></code>に繋げて<code class="docutils literal notranslate"><span class="pre">street</span></code>を、またはそれ以外では<code class="docutils literal notranslate"><span class="pre">nil</span></code>を返します。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID248">
<h2><span class="enstr">Accessing Properties Through Optional Chaining<a class="headerlink" href="#ID248" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通してプロパティにアクセスする<a class="headerlink" href="#ID248" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">As demonstrated in <a class="reference internal" href="#ID246"><span class="std std-ref">Optional Chaining as an Alternative to Forced Unwrapping</span></a>, you can use optional chaining to access a property on an optional value, and to check if that property access is successful.</span><!--end_enstr-->
<span class="jpstr">
<a class="reference internal" href="#ID246"><span class="std std-ref">強制アンラップに代わるものとしてのオプショナル連鎖</span></a>で例示されるように、あなたはオプショナル連鎖を使って、あるオプショナル上でプロパティにアクセスして、そのプロパティへのアクセスが成功したか調べることができます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Use the classes defined above to create a new <code class="docutils literal notranslate"><span class="pre">Person</span></code> instance, and try to access its <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code> property as before:</span><!--end_enstr-->
<span class="jpstr">
上のクラス定義を使って、新しい<code class="docutils literal notranslate"><span class="pre">Person</span></code>インスタンスをつくって、前のようにその<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>プロパティにアクセスすることを試みてください：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">john</span> = <span class="nv">Person</span>()
</li><li><span class="k">if</span> <span class="k">let</span> <span class="nv">roomCount</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">numberOfRooms</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"John's residence has </span>\<span class="p">(</span><span class="nv">roomCount</span><span class="p">)</span><span class="s"> room(s)."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the number of rooms."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "Unable to retrieve the number of rooms."</span><!--end_enstr--><span class="jpstr">（「部屋の数を取り出すことができない」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">Because <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> is <code class="docutils literal notranslate"><span class="pre">nil</span></code>, this optional chaining call fails in the same way as before.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>が<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるため、このオプショナル連鎖呼び出しは前と同じやり方で失敗します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">You can also attempt to set a property’s value through optional chaining:</span><!--end_enstr-->
<span class="jpstr">
あなたはまたプロパティの値をオプショナル連鎖を通して設定することを試みることができます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">someAddress</span> = <span class="nv">Address</span>()
</li><li><span class="nv">someAddress</span>.<span class="nv">buildingNumber</span> = <span class="s">"29"</span>
</li><li><span class="nv">someAddress</span>.<span class="nv">street</span> = <span class="s">"Acacia Road"</span>
</li><li><span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span> = <span class="nv">someAddress</span>
</li></ol></div></div></div>
<p><span class="enstr">In this example, the attempt to set the <code class="docutils literal notranslate"><span class="pre">address</span></code> property of <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> will fail, because <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> is currently <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</span><!--end_enstr-->
<span class="jpstr">
この例において、<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>の<code class="docutils literal notranslate"><span class="pre">address</span></code>プロパティを設定する試みは失敗します、なぜなら<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>が現在<code class="docutils literal notranslate"><span class="pre">nil</span></code>だからです。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The assignment is part of the optional chaining, which means none of the code on the right-hand side of the <code class="docutils literal notranslate"><span class="pre">=</span></code> operator is evaluated. In the previous example, it’s not easy to see that <code class="docutils literal notranslate"><span class="pre">someAddress</span></code> is never evaluated, because accessing a constant doesn’t have any side effects. The listing below does the same assignment, but it uses a function to create the address. The function prints “Function was called” before returning a value, which lets you see whether the right-hand side of the <code class="docutils literal notranslate"><span class="pre">=</span></code> operator was evaluated.</span><!--end_enstr-->
<span class="jpstr">
この代入はオプショナル連鎖の一部です、それが意味するのは、<code class="docutils literal notranslate"><span class="pre">=</span></code>演算子の右手側で評価されるコードは何もないということです。前の例において、<code class="docutils literal notranslate"><span class="pre">someAddress</span></code>が決して評価されないというのはわかりやすいとはいえません、なぜならある定数を代入することは、何ら副作用を持たないからです。下でのコード出力は、同じ代入を行います、しかしそれはある関数を使ってアドレスを作成します。この関数は、値を返す前に「Function was called（関数は呼び出された）」を出力します、それはあなたに<code class="docutils literal notranslate"><span class="pre">=</span></code>演算子の右手側が評価されたかどうかを確かめさせます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">createAddress</span>() -&gt; <span class="nc">Address</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Function was called."</span>)
</li><li>
</li><li>    <span class="k">let</span> <span class="nv">someAddress</span> = <span class="nv">Address</span>()
</li><li>    <span class="nv">someAddress</span>.<span class="nv">buildingNumber</span> = <span class="s">"29"</span>
</li><li>    <span class="nv">someAddress</span>.<span class="nv">street</span> = <span class="s">"Acacia Road"</span>
</li><li>
</li><li>    <span class="k">return</span> <span class="nv">someAddress</span>
</li><li>}
</li><li><span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span> = <span class="nv">createAddress</span>()
</li></ol></div></div></div>
<p><span class="enstr">You can tell that the <code class="docutils literal notranslate"><span class="pre">createAddress()</span></code> function isn’t called, because nothing is printed.</span><!--end_enstr-->
<span class="jpstr">
あなたは、<code class="docutils literal notranslate"><span class="pre">createAddress()</span></code>関数が呼ばれなかったと言うことができます、なぜなら何も出力されなかったからです。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID249">
<h2><span class="enstr">Calling Methods Through Optional Chaining<a class="headerlink" href="#ID249" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通してメソッドを呼ぶ<a class="headerlink" href="#ID249" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You can use optional chaining to call a method on an optional value, and to check whether that method call is successful. You can do this even if that method doesn’t define a return value.</span><!--end_enstr-->
<span class="jpstr">
あなたはオプショナル連鎖を使って、オプショナルの値の上でメソッドを呼んで、そしてそのメソッド呼び出しが成功しているかどうか調べることができます。たとえそのメソッドが戻り値を定義しないとしても、あなたはこれをすることができます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">printNumberOfRooms()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">Residence</span></code> class prints the current value of <code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>. Here’s how the method looks:</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">Residence</span></code>クラス上の<code class="docutils literal notranslate"><span class="pre">printNumberOfRooms()</span></code>メソッドは、<code class="docutils literal notranslate"><span class="pre">numberOfRooms</span></code>の現在の値を出力します。どのようにそのメソッドが見えるかは、ここにあります：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">printNumberOfRooms</span>() {
</li><li>    <span class="nv">print</span>(<span class="s">"The number of rooms is </span>\<span class="p">(</span><span class="nv">numberOfRooms</span><span class="p">)</span><span class="s">"</span>)
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">This method doesn’t specify a return type. However, functions and methods with no return type have an implicit return type of <code class="docutils literal notranslate"><span class="pre">Void</span></code>, as described in <a class="reference internal" href="Functions.html#ID163"><span class="std std-ref">Functions Without Return Values</span></a>. This means that they return a value of <code class="docutils literal notranslate"><span class="pre">()</span></code>, or an empty tuple.</span><!--end_enstr-->
<span class="jpstr">
このメソッドは、戻り型を指定しません。しかし、<a class="reference internal" href="Functions.html#ID163"><span class="std std-ref">戻り値のない関数</span></a>で記述されるように、戻り型のない関数やメソッドは、<code class="docutils literal notranslate"><span class="pre">Void</span></code>の暗黙の戻り型を持ちます。これは、それらが値<code class="docutils literal notranslate"><span class="pre">()</span></code>、または空のタプルを返すことを意味します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">If you call this method on an optional value with optional chaining, the method’s return type will be <code class="docutils literal notranslate"><span class="pre">Void?</span></code>, not <code class="docutils literal notranslate"><span class="pre">Void</span></code>, because return values are always of an optional type when called through optional chaining. This enables you to use an <code class="docutils literal notranslate"><span class="pre">if</span></code> statement to check whether it was possible to call the <code class="docutils literal notranslate"><span class="pre">printNumberOfRooms()</span></code> method, even though the method doesn’t itself define a return value. Compare the return value from the <code class="docutils literal notranslate"><span class="pre">printNumberOfRooms</span></code> call against <code class="docutils literal notranslate"><span class="pre">nil</span></code> to see if the method call was successful:</span><!--end_enstr-->
<span class="jpstr">
あなたがこのメソッドをあるオプショナルの値の上でオプショナル連鎖を使って呼ぶならば、メソッドの戻り値は<code class="docutils literal notranslate"><span class="pre">Void?</span></code>になります、<code class="docutils literal notranslate"><span class="pre">Void</span></code>ではなく、なぜならば、オプショナル連鎖を通して呼び出されるとき戻り値は常にオプショナルだからです。これはあなたに<code class="docutils literal notranslate"><span class="pre">if</span></code>文を<code class="docutils literal notranslate"><span class="pre">printNumberOfRooms()</span></code>メソッドを呼び出すことが可能か調べるために使うことを可能にします、たとえそのメソッドがそれ自身では戻り値を定義しないとしてもです。<code class="docutils literal notranslate"><span class="pre">printNumberOfRooms</span></code>呼び出しからの戻り値を<code class="docutils literal notranslate"><span class="pre">nil</span></code>と比較して、そのメソッドがうまく呼び出されたか見てください：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">printNumberOfRooms</span>() != <span class="k">nil</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"It was possible to print the number of rooms."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"It was not possible to print the number of rooms."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "It was not possible to print the number of rooms."</span><!--end_enstr--><span class="jpstr">（「部屋の数を出力することは、可能ではありませんでした。」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">The same is true if you attempt to set a property through optional chaining. The example above in <a class="reference internal" href="#ID248"><span class="std std-ref">Accessing Properties Through Optional Chaining</span></a> attempts to set an <code class="docutils literal notranslate"><span class="pre">address</span></code> value for <code class="docutils literal notranslate"><span class="pre">john.residence</span></code>, even though the <code class="docutils literal notranslate"><span class="pre">residence</span></code> property is <code class="docutils literal notranslate"><span class="pre">nil</span></code>. Any attempt to set a property through optional chaining returns a value of type <code class="docutils literal notranslate"><span class="pre">Void?</span></code>, which enables you to compare against <code class="docutils literal notranslate"><span class="pre">nil</span></code> to see if the property was set successfully:</span><!--end_enstr-->
<span class="jpstr">
同じことは、あなたがプロパティをオプショナル連鎖を通して設定しようと試みる場合にも当てはまります。<a class="reference internal" href="#ID248"><span class="std std-ref">オプショナル連鎖を通してプロパティにアクセスする</span></a>での前の例は、ある<code class="docutils literal notranslate"><span class="pre">address</span></code>値を<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>に対して設定することを試みます、たとえ<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティが<code class="docutils literal notranslate"><span class="pre">nil</span></code>であるとしてもです。オプショナル連鎖を通してプロパティを設定しようとするあらゆる試みは、型<code class="docutils literal notranslate"><span class="pre">Void?</span></code>の値を返します、それは、あなたに<code class="docutils literal notranslate"><span class="pre">nil</span></code>と比較することでそのプロパティがうまく設定されたかどうか調べることを可能にします。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> (<span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span> = <span class="nv">someAddress</span>) != <span class="k">nil</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"It was possible to set the address."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"It was not possible to set the address."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "It was not possible to set the address."</span><!--end_enstr--><span class="jpstr">（「住所を設定することは、可能ではありませんでした。」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
</div>
<div class="section" id="ID250">
<h2><span class="enstr">Accessing Subscripts Through Optional Chaining<a class="headerlink" href="#ID250" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖を通して添え字にアクセスする<a class="headerlink" href="#ID250" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You can use optional chaining to try to retrieve and set a value from a subscript on an optional value, and to check whether that subscript call is successful.</span><!--end_enstr-->
<span class="jpstr">
あなたは、オプショナル連鎖を使って、あるオプショナルの値上の添え字から値を取り出したり設定したりすること、そしてその添え字がうまく呼び出されるかどうかを調べることができます。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">When you access a subscript on an optional value through optional chaining, you place the question mark <em>before</em> the subscript’s brackets, not after. The optional chaining question mark always follows immediately after the part of the expression that’s optional.</span><!--end_enstr-->
<span class="jpstr">
あなたがオプショナル連鎖を通してオプショナルの値の上で添え字にアクセスするとき、あなたは添え字の角括弧の<em>前に</em>疑問符を置きます、後ろではなく。オプショナル連鎖の疑問符は、常にオプショナルである式部分の直後に続きます。
</span><!--end_jpstr-->
</p>
</div>
<p><span class="enstr">The example below tries to retrieve the name of the first room in the <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array of the <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> property using the subscript defined on the <code class="docutils literal notranslate"><span class="pre">Residence</span></code> class. Because <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> is currently <code class="docutils literal notranslate"><span class="pre">nil</span></code>, the subscript call fails:</span><!--end_enstr-->
<span class="jpstr">
下の例は、<code class="docutils literal notranslate"><span class="pre">Residence</span></code>クラス上で定義される添え字を使って、<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>プロパティの<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列での最初の部屋の名前を取り出そうとします。<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>が現在<code class="docutils literal notranslate"><span class="pre">nil</span></code>なので、添え字呼び出しは失敗します：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">firstRoomName</span> = <span class="nv">john</span>.<span class="nv">residence</span>?[<span class="m">0</span>].<span class="nv">name</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"The first room name is </span>\<span class="p">(</span><span class="nv">firstRoomName</span><span class="p">)</span><span class="s">."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the first room name."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "Unable to retrieve the first room name."</span><!--end_enstr--><span class="jpstr">（「最初の部屋名を取り戻すことができない」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">The optional chaining question mark in this subscript call is placed immediately after <code class="docutils literal notranslate"><span class="pre">john.residence</span></code>, before the subscript brackets, because <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> is the optional value on which optional chaining is being attempted.</span><!--end_enstr-->
<span class="jpstr">
この添え字呼び出しでのオプショナル連鎖の疑問符は、<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>の直後、添え字の角括弧の前に置かれます、なぜなら、<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>がオプショナル連鎖が試みられているオプショナルの値であるからです。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Similarly, you can try to set a new value through a subscript with optional chaining:</span><!--end_enstr-->
<span class="jpstr">
同じように、あなたはオプショナル連鎖を使う添え字を通して、新しい値の設定を試みることができます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="nv">john</span>.<span class="nv">residence</span>?[<span class="m">0</span>] = <span class="nv">Room</span>(<span class="nv">name</span>: <span class="s">"Bathroom"</span>)
</li></ol></div></div></div>
<p><span class="enstr">This subscript setting attempt also fails, because <code class="docutils literal notranslate"><span class="pre">residence</span></code> is currently <code class="docutils literal notranslate"><span class="pre">nil</span></code>.</span><!--end_enstr-->
<span class="jpstr">
この添え字設定の試みはまた失敗します、なぜなら<code class="docutils literal notranslate"><span class="pre">residence</span></code>が現在<code class="docutils literal notranslate"><span class="pre">nil</span></code>だからです。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">If you create and assign an actual <code class="docutils literal notranslate"><span class="pre">Residence</span></code> instance to <code class="docutils literal notranslate"><span class="pre">john.residence</span></code>, with one or more <code class="docutils literal notranslate"><span class="pre">Room</span></code> instances in its <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array, you can use the <code class="docutils literal notranslate"><span class="pre">Residence</span></code> subscript to access the actual items in the <code class="docutils literal notranslate"><span class="pre">rooms</span></code> array through optional chaining:</span><!--end_enstr-->
<span class="jpstr">
あなたが実際の<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスをつくって<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>に代入して、その<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列の中に１つ以上の<code class="docutils literal notranslate"><span class="pre">Room</span></code>インスタンスをもつならば、あなたは<code class="docutils literal notranslate"><span class="pre">Residence</span></code>添え字を使って、オプショナル連鎖を通して<code class="docutils literal notranslate"><span class="pre">rooms</span></code>配列の実際の項目にアクセスすることができます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">johnsHouse</span> = <span class="nv">Residence</span>()
</li><li><span class="nv">johnsHouse</span>.<span class="nv">rooms</span>.<span class="nv">append</span>(<span class="nv">Room</span>(<span class="nv">name</span>: <span class="s">"Living Room"</span>))
</li><li><span class="nv">johnsHouse</span>.<span class="nv">rooms</span>.<span class="nv">append</span>(<span class="nv">Room</span>(<span class="nv">name</span>: <span class="s">"Kitchen"</span>))
</li><li><span class="nv">john</span>.<span class="nv">residence</span> = <span class="nv">johnsHouse</span>
</li><li>
</li><li><span class="k">if</span> <span class="k">let</span> <span class="nv">firstRoomName</span> = <span class="nv">john</span>.<span class="nv">residence</span>?[<span class="m">0</span>].<span class="nv">name</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"The first room name is </span>\<span class="p">(</span><span class="nv">firstRoomName</span><span class="p">)</span><span class="s">."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the first room name."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "The first room name is Living Room."</span><!--end_enstr--><span class="jpstr">（「最初の部屋名は、居間です。」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<div class="section" id="ID251">
<h3><span class="enstr">Accessing Subscripts of Optional Type<a class="headerlink" href="#ID251" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナル型の添え字にアクセスする<a class="headerlink" href="#ID251" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h3>
<p><span class="enstr">If a subscript returns a value of optional type—such as the key subscript of Swift’s <code class="docutils literal notranslate"><span class="pre">Dictionary</span></code> type—place a question mark <em>after</em> the subscript’s closing bracket to chain on its optional return value:</span><!--end_enstr-->
<span class="jpstr">
ある添え字がオプショナル型の値を返すならば ― 例えばスウィフトの<code class="docutils literal notranslate"><span class="pre">Dictionary</span></code>型のキー添え字 ― 疑問符をその添え字の閉じ括弧の<em>後ろに</em>置いて、そのオプショナルの戻り値の上に連鎖を繋げてください：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">var</span> <span class="nv">testScores</span> = [<span class="s">"Dave"</span>: [<span class="m">86</span>, <span class="m">82</span>, <span class="m">84</span>], <span class="s">"Bev"</span>: [<span class="m">79</span>, <span class="m">94</span>, <span class="m">81</span>]]
</li><li><span class="nv">testScores</span>[<span class="s">"Dave"</span>]?[<span class="m">0</span>] = <span class="m">91</span>
</li><li><span class="nv">testScores</span>[<span class="s">"Bev"</span>]?[<span class="m">0</span>] += <span class="m">1</span>
</li><li><span class="nv">testScores</span>[<span class="s">"Brian"</span>]?[<span class="m">0</span>] = <span class="m">72</span>
</li><li><span class="c"><span class="enstr">// the "Dave" array is now [91, 82, 84] and the "Bev" array is now [80, 94, 81]</span><!--end_enstr--><span class="jpstr">（「Dave」配列は現在[91, 82, 84]です、そして「Bev」配列は現在[80, 94, 81]です）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">The example above defines a dictionary called <code class="docutils literal notranslate"><span class="pre">testScores</span></code>, which contains two key-value pairs that map a <code class="docutils literal notranslate"><span class="pre">String</span></code> key to an array of <code class="docutils literal notranslate"><span class="pre">Int</span></code> values. The example uses optional chaining to set the first item in the <code class="docutils literal notranslate"><span class="pre">"Dave"</span></code> array to <code class="docutils literal notranslate"><span class="pre">91</span></code>; to increment the first item in the <code class="docutils literal notranslate"><span class="pre">"Bev"</span></code> array by <code class="docutils literal notranslate"><span class="pre">1</span></code>; and to try to set the first item in an array for a key of <code class="docutils literal notranslate"><span class="pre">"Brian"</span></code>. The first two calls succeed, because the <code class="docutils literal notranslate"><span class="pre">testScores</span></code> dictionary contains keys for <code class="docutils literal notranslate"><span class="pre">"Dave"</span></code> and <code class="docutils literal notranslate"><span class="pre">"Bev"</span></code>. The third call fails, because the <code class="docutils literal notranslate"><span class="pre">testScores</span></code> dictionary doesn’t contain a key for <code class="docutils literal notranslate"><span class="pre">"Brian"</span></code>.</span><!--end_enstr-->
<span class="jpstr">
上の例は<code class="docutils literal notranslate"><span class="pre">testScores</span></code>と呼ばれる辞書型を定義します、それは、２つの「キーと値」対を含んでいて、それは<code class="docutils literal notranslate"><span class="pre">String</span></code>キーを<code class="docutils literal notranslate"><span class="pre">Int</span></code>値を持つ配列と関連づけます。この例は、オプショナル連鎖を使って<code class="docutils literal notranslate"><span class="pre">"Dave"</span></code>配列の最初の項目を<code class="docutils literal notranslate"><span class="pre">91</span></code>に設定します；それから<code class="docutils literal notranslate"><span class="pre">"Bev"</span></code>配列の最初の項目を<code class="docutils literal notranslate"><span class="pre">1</span></code>だけ増加します；そしてそれから<code class="docutils literal notranslate"><span class="pre">"Brian"</span></code>のキーに対応する配列の最初の項目を設定することを試みます。最初の２つの呼び出しは成功します、なぜなら、<code class="docutils literal notranslate"><span class="pre">testScores</span></code>辞書は<code class="docutils literal notranslate"><span class="pre">"Dave"</span></code>と<code class="docutils literal notranslate"><span class="pre">"Bev"</span></code>のキーを含んでいるからです。３番目の呼び出しは失敗します、なぜなら、<code class="docutils literal notranslate"><span class="pre">testScores</span></code>辞書は<code class="docutils literal notranslate"><span class="pre">"Brian"</span></code>のキーを含んでいないからです。
</span><!--end_jpstr-->
</p>
</div>
</div>
<div class="section" id="ID252">
<h2><span class="enstr">Linking Multiple Levels of Chaining<a class="headerlink" href="#ID252" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
連鎖の複数の階層を結ぶ<a class="headerlink" href="#ID252" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You can link together multiple levels of optional chaining to drill down to properties, methods, and subscripts deeper within a model. However, multiple levels of optional chaining don’t add more levels of optionality to the returned value.</span><!--end_enstr-->
<span class="jpstr">
あなたは、オプショナル連鎖の複数の階層を結びつけて、あるモデル内のより深いプロパティ、メソッド、そして添え字に掘り下げていくことができます。しかし、オプショナル連鎖の複数の階層は、返された値にさらにオプショナルの階層を加えません。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">To put it another way:</span><!--end_enstr-->
<span class="jpstr">
言い換えれば：
</span><!--end_jpstr-->
</p>
<ul class="simple">
<li><span class="enstr">If the type you are trying to retrieve isn’t optional, it will become optional because of the optional chaining.</span><!--end_enstr-->
<span class="jpstr">
あなたが取り出そうとしている型がオプショナルでないならば、それはオプショナル連鎖であることからオプショナルになります。
</span><!--end_jpstr-->
</li>
<li><span class="enstr">If the type you are trying to retrieve is <em>already</em> optional, it will not become <em>more</em> optional because of the chaining.</span><!--end_enstr-->
<span class="jpstr">
あなたが取り出そうとしている型が<em>すでに</em>オプショナルならば、それは連鎖であることから<em>さらに</em>オプショナルにはなりません。
</span><!--end_jpstr-->
</li>
</ul>
<p><span class="enstr">Therefore:</span><!--end_enstr-->
<span class="jpstr">
したがって：
</span><!--end_jpstr-->
</p>
<ul class="simple">
<li><span class="enstr">If you try to retrieve an <code class="docutils literal notranslate"><span class="pre">Int</span></code> value through optional chaining, an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> is always returned, no matter how many levels of chaining are used.</span><!--end_enstr-->
<span class="jpstr">
あなたがオプショナル連鎖を通して<code class="docutils literal notranslate"><span class="pre">Int</span></code>値を取り出そうと試すならば、<code class="docutils literal notranslate"><span class="pre">Int?</span></code>が常に返されます、どんなに多くの連鎖階層が使われようともです。
</span><!--end_jpstr-->
</li>
<li><span class="enstr">Similarly, if you try to retrieve an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> value through optional chaining, an <code class="docutils literal notranslate"><span class="pre">Int?</span></code> is always returned, no matter how many levels of chaining are used.</span><!--end_enstr-->
<span class="jpstr">
同じように、あなたがオプショナル連鎖を通して<code class="docutils literal notranslate"><span class="pre">Int?</span></code>値を取り出そうと試すならば、<code class="docutils literal notranslate"><span class="pre">Int?</span></code>が常に返されます、どんなに多くの連鎖階層が使われようともです。
</span><!--end_jpstr-->
</li>
</ul>
<p><span class="enstr">The example below tries to access the <code class="docutils literal notranslate"><span class="pre">street</span></code> property of the <code class="docutils literal notranslate"><span class="pre">address</span></code> property of the <code class="docutils literal notranslate"><span class="pre">residence</span></code> property of <code class="docutils literal notranslate"><span class="pre">john</span></code>. There are <em>two</em> levels of optional chaining in use here, to chain through the <code class="docutils literal notranslate"><span class="pre">residence</span></code> and <code class="docutils literal notranslate"><span class="pre">address</span></code> properties, both of which are of optional type:</span><!--end_enstr-->
<span class="jpstr">
下の例は、<code class="docutils literal notranslate"><span class="pre">john</span></code>の<code class="docutils literal notranslate"><span class="pre">residence</span></code>プロパティの<code class="docutils literal notranslate"><span class="pre">address</span></code>プロパティの<code class="docutils literal notranslate"><span class="pre">street</span></code>プロパティにアクセスしようとします。ここで使用されるオプショナル連鎖の<em>２つの</em>階層があります、そして<code class="docutils literal notranslate"><span class="pre">residence</span></code>と<code class="docutils literal notranslate"><span class="pre">addressプ</span></code>ロパティを通り抜けて繋げます、その両方ともオプショナル型です：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">johnsStreet</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span>?.<span class="nv">street</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"John's street name is </span>\<span class="p">(</span><span class="nv">johnsStreet</span><span class="p">)</span><span class="s">."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the address."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "Unable to retrieve the address."</span><!--end_enstr--><span class="jpstr">（「住所を取り出すことができない」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">The value of <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> currently contains a valid <code class="docutils literal notranslate"><span class="pre">Residence</span></code> instance. However, the value of <code class="docutils literal notranslate"><span class="pre">john.residence.address</span></code> is currently <code class="docutils literal notranslate"><span class="pre">nil</span></code>. Because of this, the call to <code class="docutils literal notranslate"><span class="pre">john.residence?.address?.street</span></code> fails.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>の値は、現在は有効な<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスを含みます。しかし、<code class="docutils literal notranslate"><span class="pre">john.residence.address</span></code>の値は、現在は<code class="docutils literal notranslate"><span class="pre">nil</span></code>です。このことから、<code class="docutils literal notranslate"><span class="pre">john.residence?.address?.street</span></code>への呼び出しは、失敗します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Note that in the example above, you are trying to retrieve the value of the <code class="docutils literal notranslate"><span class="pre">street</span></code> property. The type of this property is <code class="docutils literal notranslate"><span class="pre">String?</span></code>. The return value of <code class="docutils literal notranslate"><span class="pre">john.residence?.address?.street</span></code> is therefore also <code class="docutils literal notranslate"><span class="pre">String?</span></code>, even though two levels of optional chaining are applied in addition to the underlying optional type of the property.</span><!--end_enstr-->
<span class="jpstr">
上の例で、あなたが<code class="docutils literal notranslate"><span class="pre">street</span></code>プロパティの値を取り出そうとしている点に注意してください。このプロパティの型は、<code class="docutils literal notranslate"><span class="pre">String?</span></code>です。<code class="docutils literal notranslate"><span class="pre">john.residence?.address?.street</span></code>の戻り値は、したがってまた、<code class="docutils literal notranslate"><span class="pre">String?</span></code>です、その下のプロパティのオプショナル型に加えて２つのオプショナル連鎖の階層が適用されるとしてもです。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">If you set an actual <code class="docutils literal notranslate"><span class="pre">Address</span></code> instance as the value for <code class="docutils literal notranslate"><span class="pre">john.residence.address</span></code>, and set an actual value for the address’s <code class="docutils literal notranslate"><span class="pre">street</span></code> property, you can access the value of the <code class="docutils literal notranslate"><span class="pre">street</span></code> property through multilevel optional chaining:</span><!--end_enstr-->
<span class="jpstr">
あなたが実際の<code class="docutils literal notranslate"><span class="pre">Address</span></code>インスタンスを<code class="docutils literal notranslate"><span class="pre">john.residence.address</span></code>のための値として設定して、そしてアドレスのもつ<code class="docutils literal notranslate"><span class="pre">street</span></code>プロパティのために実際の値を設定するならば、あなたは複数階層のオプショナル連鎖を通して<code class="docutils literal notranslate"><span class="pre">street</span></code>プロパティの値にアクセスすることができます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">johnsAddress</span> = <span class="nv">Address</span>()
</li><li><span class="nv">johnsAddress</span>.<span class="nv">buildingName</span> = <span class="s">"The Larches"</span>
</li><li><span class="nv">johnsAddress</span>.<span class="nv">street</span> = <span class="s">"Laurel Street"</span>
</li><li><span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span> = <span class="nv">johnsAddress</span>
</li><li>
</li><li><span class="k">if</span> <span class="k">let</span> <span class="nv">johnsStreet</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span>?.<span class="nv">street</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"John's street name is </span>\<span class="p">(</span><span class="nv">johnsStreet</span><span class="p">)</span><span class="s">."</span>)
</li><li>} <span class="k">else</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unable to retrieve the address."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "John's street name is Laurel Street."</span><!--end_enstr--><span class="jpstr">（「ジョンの街路名は月桂樹通りです」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">In this example, the attempt to set the <code class="docutils literal notranslate"><span class="pre">address</span></code> property of <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> will succeed, because the value of <code class="docutils literal notranslate"><span class="pre">john.residence</span></code> currently contains a valid <code class="docutils literal notranslate"><span class="pre">Residence</span></code> instance.</span><!--end_enstr-->
<span class="jpstr">
この例において、<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>の<code class="docutils literal notranslate"><span class="pre">address</span></code>プロパティを設定しようとする試みは成功します、なぜなら<code class="docutils literal notranslate"><span class="pre">john.residence</span></code>の値は現在は有効な<code class="docutils literal notranslate"><span class="pre">Residence</span></code>インスタンスを含むからです。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID253">
<h2><span class="enstr">Chaining on Methods with Optional Return Values<a class="headerlink" href="#ID253" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
オプショナルの戻り値をもつメソッド上で連鎖する<a class="headerlink" href="#ID253" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">The previous example shows how to retrieve the value of a property of optional type through optional chaining. You can also use optional chaining to call a method that returns a value of optional type, and to chain on that method’s return value if needed.</span><!--end_enstr-->
<span class="jpstr">
前の例は、オプショナル連鎖を通してオプショナルの型のプロパティの値を取り出す方法を示します。あなたはまたオプショナル連鎖を使って、オプショナルの型の値を返すメソッドを呼び出すこと、そして必要ならば、そのメソッドの戻り値の上で連鎖することができます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The example below calls the <code class="docutils literal notranslate"><span class="pre">Address</span></code> class’s <code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code> method through optional chaining. This method returns a value of type <code class="docutils literal notranslate"><span class="pre">String?</span></code>. As described above, the ultimate return type of this method call after optional chaining is also <code class="docutils literal notranslate"><span class="pre">String?</span></code>:</span><!--end_enstr-->
<span class="jpstr">
下の例は、オプショナル連鎖を通して<code class="docutils literal notranslate"><span class="pre">Address</span></code>クラスの<code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code>メソッドを呼び出します。このメソッドは、型<code class="docutils literal notranslate"><span class="pre">String?</span></code>の値を返します。先に述べたように、オプショナル連鎖の後ろのこのメソッド呼び出しの最終的な戻り型は、また、<code class="docutils literal notranslate"><span class="pre">String?</span></code>です：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">buildingIdentifier</span> = <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span>?.<span class="nv">buildingIdentifier</span>() {
</li><li>    <span class="nv">print</span>(<span class="s">"John's building identifier is </span>\<span class="p">(</span><span class="nv">buildingIdentifier</span><span class="p">)</span><span class="s">."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "John's building identifier is The Larches."</span><!--end_enstr--><span class="jpstr">（「ジョンの建物名は月桂樹です」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">If you want to perform further optional chaining on this method’s return value, place the optional chaining question mark <em>after</em> the method’s parentheses:</span><!--end_enstr-->
<span class="jpstr">
あなたがこのメソッドの戻り値の上でさらにオプショナル連鎖を実行したいならば、メソッドの丸括弧の<em>後に</em>オプショナル連鎖の疑問符を置いてください：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">if</span> <span class="k">let</span> <span class="nv">beginsWithThe</span> =
</li><li>    <span class="nv">john</span>.<span class="nv">residence</span>?.<span class="nv">address</span>?.<span class="nv">buildingIdentifier</span>()?.<span class="nv">hasPrefix</span>(<span class="s">"The"</span>) {
</li><li>    <span class="k">if</span> <span class="nv">beginsWithThe</span> {
</li><li>        <span class="nv">print</span>(<span class="s">"John's building identifier begins with \"The\"."</span>)
</li><li>    } <span class="k">else</span> {
</li><li>        <span class="nv">print</span>(<span class="s">"John's building identifier doesn't begin with \"The\"."</span>)
</li><li>    }
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "John's building identifier begins with "The"."</span><!--end_enstr--><span class="jpstr">（「ジョンの建物名は「月」で始まります」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">In the example above, you place the optional chaining question mark <em>after</em> the parentheses, because the optional value you are chaining on is the <code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code> method’s return value, and not the <code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code> method itself.</span><!--end_enstr-->
<span class="jpstr">
上の例で、あなたは丸括弧の<em>後に</em>オプショナル連鎖の疑問符を置きます、なぜなら、あなたがその上に連鎖しているオプショナルの値は<code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code>メソッドの戻り値であって、<code class="docutils literal notranslate"><span class="pre">buildingIdentifier()</span></code>メソッドそれ自体ではないからです。
</span><!--end_jpstr-->
</p>
</div>
</div>
</div>


    </article>
    <div class="next_previous">
        <p class="previous"><a href="Deinitialization.html"><span class="enstr">Deinitialization</span><!--end_enstr-->
<span class="jpstr">
デイニシャライズ
</span><!--end_jpstr-->
</a></p>
        <p class="next"><a href="ErrorHandling.html"><span class="enstr">Error Handling</span><!--end_enstr-->
<span class="jpstr">
エラーの処理
</span><!--end_jpstr-->
</a></p>
    </div>
    <div class="admonition-beta admonition">
        <p class="first admonition-title">Beta Software</p>
        <p>
          <span class="enstr">This documentation contains preliminary information about an API or technology in development. This information is subject to change, and software implemented according to this documentation should be tested with final operating system software.</span><!--end_enstr-->
<span class="jpstr">
この文書は、開発でのテクノロジーまたはAPIのための事前の情報を含んでいます。この情報は変更される場合があり、この文書に沿って実装されるソフトウェアは最終的なオペレーティングシステム・ソフトウェアでテストされなければなりません。
</span><!--end_jpstr-->

        </p>
        <p class="last"><a class="reference external" href="https://developer.apple.com/support/beta-software/">Learn more about using Apple's beta software</a></p>
    </div>
</main>


<footer role="contentinfo">
  <aside>
    <a href="//swift.org/atom.xml" title="Subscribe to Site Updates"><i class="feed">Subscribe</i></a>
    <a href="https://twitter.com/swiftlang" rel="nofollow" title="Follow @SwiftLang on Twitter"><i class="twitter">Twitter</i></a>
  </aside>

  <p class="copyright">Copyright © 2021 Apple Inc. All rights reserved.</p>
  <p class="trademark">Swift and the Swift logo are trademarks of Apple Inc.</p>
  <p class="privacy">
    <a href="//www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
    <a href="//www.apple.com/legal/privacy/en-ww/cookies/">Cookies</a>
  </p>
</footer>
<div id="jump_to_overlay"></div>
<script src="../static/javascripts/application.js"></script>
  </body>
</html>