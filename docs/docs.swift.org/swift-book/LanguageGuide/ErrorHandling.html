

<!DOCTYPE html>



<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta name="author" content="Apple Inc." />
    <meta name="viewport" content="width=device-width initial-scale=1" />
    
    <title>Error Handling — The Swift Programming Language (Swift 5.5)</title>
    
    <link rel="license" href="/LICENSE.txt" />
    <link rel="stylesheet" media="all" href="../static/stylesheets/application.css" />
    <link rel="stylesheet" media="all" href="../static/stylesheets/tspl.css" />
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png" />
    <link rel="mask-icon" href="/assets/images/icon-swift.svg" color="#F05339" /> 
  </head>
  <body>


<nav role="navigation">
    <header role="banner">
      <h1 id="logo">
        <a href="https://swift.org/" title="Swift.org" role="img" aria-label="Swift.org">
          Swift.org
        </a>
      </h1>
    </header>

    <div id="menu-toggle" class="menu-toggle open"></div>

    <h2>The Swift Programming Language<div>Swift 5.5</div></h2>

    <ul>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"><span class="enstr">Welcome to Swift</span><!--end_enstr-->
<span class="jpstr">
スウィフトにようこそ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="TheBasics.html"><span class="enstr">Language Guide</span><!--end_enstr-->
<span class="jpstr">
言語ガイド
</span><!--end_jpstr-->
</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="TheBasics.html"><span class="enstr">The Basics</span><!--end_enstr-->
<span class="jpstr">
基本
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="BasicOperators.html"><span class="enstr">Basic Operators</span><!--end_enstr-->
<span class="jpstr">
基本の演算子
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="StringsAndCharacters.html"><span class="enstr">Strings and Characters</span><!--end_enstr-->
<span class="jpstr">
文字列と文字
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="CollectionTypes.html"><span class="enstr">Collection Types</span><!--end_enstr-->
<span class="jpstr">
コレクション型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="ControlFlow.html"><span class="enstr">Control Flow</span><!--end_enstr-->
<span class="jpstr">
制御の流れ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Functions.html"><span class="enstr">Functions</span><!--end_enstr-->
<span class="jpstr">
関数
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Closures.html"><span class="enstr">Closures</span><!--end_enstr-->
<span class="jpstr">
クロージャ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Enumerations.html"><span class="enstr">Enumerations</span><!--end_enstr-->
<span class="jpstr">
列挙
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClassesAndStructures.html"><span class="enstr">Structures and Classes</span><!--end_enstr-->
<span class="jpstr">
構造体とクラス
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Properties.html"><span class="enstr">Properties</span><!--end_enstr-->
<span class="jpstr">
プロパティ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Methods.html"><span class="enstr">Methods</span><!--end_enstr-->
<span class="jpstr">
メソッド
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Subscripts.html"><span class="enstr">Subscripts</span><!--end_enstr-->
<span class="jpstr">
添え字
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Inheritance.html"><span class="enstr">Inheritance</span><!--end_enstr-->
<span class="jpstr">
継承
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Initialization.html"><span class="enstr">Initialization</span><!--end_enstr-->
<span class="jpstr">
初期化
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deinitialization.html"><span class="enstr">Deinitialization</span><!--end_enstr-->
<span class="jpstr">
デイニシャライズ
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="OptionalChaining.html"><span class="enstr">Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><span class="enstr">Error Handling</span><!--end_enstr-->
<span class="jpstr">
エラーの処理
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Concurrency.html"><span class="enstr">Concurrency</span><!--end_enstr-->
<span class="jpstr">
並行性
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="TypeCasting.html"><span class="enstr">Type Casting</span><!--end_enstr-->
<span class="jpstr">
型キャスト
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="NestedTypes.html"><span class="enstr">Nested Types</span><!--end_enstr-->
<span class="jpstr">
入れ子にされた型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Extensions.html"><span class="enstr">Extensions</span><!--end_enstr-->
<span class="jpstr">
拡張
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Protocols.html"><span class="enstr">Protocols</span><!--end_enstr-->
<span class="jpstr">
プロトコル
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="Generics.html"><span class="enstr">Generics</span><!--end_enstr-->
<span class="jpstr">
総称体
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="OpaqueTypes.html"><span class="enstr">Opaque Types</span><!--end_enstr-->
<span class="jpstr">
不透明型
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AutomaticReferenceCounting.html"><span class="enstr">Automatic Reference Counting</span><!--end_enstr-->
<span class="jpstr">
自動参照カウント
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="MemorySafety.html"><span class="enstr">Memory Safety</span><!--end_enstr-->
<span class="jpstr">
メモリ安全
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AccessControl.html"><span class="enstr">Access Control</span><!--end_enstr-->
<span class="jpstr">
アクセス制御
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l2"><a class="reference internal" href="AdvancedOperators.html"><span class="enstr">Advanced Operators</span><!--end_enstr-->
<span class="jpstr">
先進の演算子
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ReferenceManual/AboutTheLanguageReference.html"><span class="enstr">Language Reference</span><!--end_enstr-->
<span class="jpstr">
言語リファレンス
</span><!--end_jpstr-->
</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RevisionHistory/RevisionHistory.html"><span class="enstr">Revision History</span><!--end_enstr-->
<span class="jpstr">
改訂履歴
</span><!--end_jpstr-->
</a></li>
</ul>

    <li class="toctree-l1 return"><a class="reference internal" href="../../../index.html">← Go to Index</a></li>
    </ul>
</nav>




<main role="main">
    <article class="page">
        <menu id="bashful" type="toolbar">
          <div class="inner">
            <menuitem id="jump_to" class="menu-bar-item closed">
            <span id="jump_to_toggle">On This Page</span>
            <div class="chevron">
                <div class="chevy chevron-left"></div>
                <div class="chevy chevron-right"></div>
            </div>
            <menu type="list" class="details">
                <ul>
<li><a class="reference internal" href="#"><span class="enstr">Error Handling</span><!--end_enstr-->
<span class="jpstr">
エラーの処理
</span><!--end_jpstr-->
</a><ul>
<li><a class="reference internal" href="#ID509"><span class="enstr">Representing and Throwing Errors</span><!--end_enstr-->
<span class="jpstr">
エラーの表現とスロー
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID512"><span class="enstr">Handling Errors</span><!--end_enstr-->
<span class="jpstr">
エラーを処理する
</span><!--end_jpstr-->
</a><ul>
<li><a class="reference internal" href="#ID510"><span class="enstr">Propagating Errors Using Throwing Functions</span><!--end_enstr-->
<span class="jpstr">
スロー関数を使ってエラーを伝える
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID541"><span class="enstr">Handling Errors Using Do-Catch</span><!--end_enstr-->
<span class="jpstr">
do-catchを使ってエラーを処理する
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID542"><span class="enstr">Converting Errors to Optional Values</span><!--end_enstr-->
<span class="jpstr">
エラーをオプショナルの値に変換する
</span><!--end_jpstr-->
</a></li>
<li><a class="reference internal" href="#ID513"><span class="enstr">Disabling Error Propagation</span><!--end_enstr-->
<span class="jpstr">
エラー伝達を抑制する
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ID514"><span class="enstr">Specifying Cleanup Actions</span><!--end_enstr-->
<span class="jpstr">
クリーンアップ動作の指定
</span><!--end_jpstr-->
</a></li>
</ul>
</li>
</ul>

            </menu>
            </menuitem>
          </div>
        </menu>

        
  <div class="section" id="error-handling">
<h1><span class="enstr">Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
エラーの処理<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h1>
<p><span class="enstr"><em>Error handling</em> is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.</span><!--end_enstr-->
<span class="jpstr">
<em>エラー処理</em>は、あなたのプログラムにおいてエラー状態へ応答してそこから復旧する過程です。スウィフトは、回復可能なエラーのスロー、キャッチ、伝達、そして取り扱いに対してファーストクラスのサポートを提供します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Some operations aren’t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, it’s often useful to understand what caused the failure, so that your code can respond accordingly.</span><!--end_enstr-->
<span class="jpstr">
いくつかの操作は、常に実行を完了することや役に立つ出力を生成することを保証されません。オプショナルは、ある値の欠如を表すために使われます、しかしある操作が失敗する時、何がその失敗をもたらしたのか理解するのはしばしば役に立ちます、それであなたのコードはそれに適切に応答することができます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it can’t resolve.</span><!--end_enstr-->
<span class="jpstr">
ひとつの例として、ディスク上のファイルからデータを読み込んで処理する作業を考えてみてください。この作業が失敗するたくさんの道筋があります、そのファイルが指定したパスで存在しない、ファイルが読み出し権限を持っていない、またはファイルが互換性のある形式で符号化されていないことを含めて。これらの異なった状況を区別することは、プログラムにいくらかのエラーを解消すること、そしてなんらかのそれが解消できないエラーを利用者に伝えることを可能にします。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">Error handling in Swift interoperates with error handling patterns that use the <code class="docutils literal notranslate"><span class="pre">NSError</span></code> class in Cocoa and Objective-C. For more information about this class, see <a class="reference external" href="../../../developer.apple.com/documentation/swift/cocoa_design_patterns/handling_cocoa_errors_in_swift.html">Handling Cocoa Errors in Swift</a>.</span><!--end_enstr-->
<span class="jpstr">
スウィフトでのエラー処理は、CocoaとObjective-Cでの<code class="docutils literal notranslate"><span class="pre">NSError</span></code>クラスを使うエラー処理パターンと相互運用性があります。このクラスについてのさらなる情報として、<a class="reference external" href="../../../developer.apple.com/documentation/swift/cocoa_design_patterns/handling_cocoa_errors_in_swift.html">CocoaエラーをSwiftにおいて処理する</a>を見てください。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID509">
<h2><span class="enstr">Representing and Throwing Errors<a class="headerlink" href="#ID509" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
エラーの表現とスロー<a class="headerlink" href="#ID509" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">In Swift, errors are represented by values of types that conform to the <code class="docutils literal notranslate"><span class="pre">Error</span></code> protocol. This empty protocol indicates that a type can be used for error handling.</span><!--end_enstr-->
<span class="jpstr">
スウィフトでは、エラーは<code class="docutils literal notranslate"><span class="pre">Error</span></code>プロトコルに準拠する型の値によって表されます。この空のプロトコルは、ある型がエラー処理のために使われることができるのを示します。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, here’s how you might represent the error conditions of operating a vending machine inside a game:</span><!--end_enstr-->
<span class="jpstr">
スウィフト列挙は、あるエラーの性質についての追加情報が通信されるのを想定した関連値を含め、関係のあるエラー状況のグループを作るのにうってつけです。例えば、ここにあなたが表すかもしれないあるゲーム内の自動販売機操作のエラー状況がどのようなものかがあります：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">enum</span> <span class="nv">VendingMachineError</span>: <span class="nc">Error</span> {
</li><li>    <span class="k">case</span> <span class="nv">invalidSelection</span>
</li><li>    <span class="k">case</span> <span class="nv">insufficientFunds</span>(<span class="nv">coinsNeeded</span>: <span class="nv">Int</span>)
</li><li>    <span class="k">case</span> <span class="nv">outOfStock</span>
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">Throwing an error lets you indicate that something unexpected happened and the normal flow of execution can’t continue. You use a <code class="docutils literal notranslate"><span class="pre">throw</span></code> statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:</span><!--end_enstr-->
<span class="jpstr">
エラーのスローがあなたに示すのは、何か予期せぬことが起こった、そして通常の実行の流れは続けることができないということです。あなたは<code class="docutils literal notranslate"><span class="pre">throw</span></code>文を使ってエラーをスローします。例えば、以下のコードはあるエラーをスローして、５つの追加のコインが自動販売機に必要とされることを示します。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">throw</span> <span class="nv">VendingMachineError</span>.<span class="nv">insufficientFunds</span>(<span class="nv">coinsNeeded</span>: <span class="m">5</span>)
</li></ol></div></div></div>
</div>
<div class="section" id="ID512">
<h2><span class="enstr">Handling Errors<a class="headerlink" href="#ID512" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
エラーを処理する<a class="headerlink" href="#ID512" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">When an error is thrown, some surrounding piece of code must be responsible for handling the error—for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.</span><!--end_enstr-->
<span class="jpstr">
あるエラーがスローされるとき、なかには周囲のコード部分がエラーを処理することに対して責任を持たなければならないこともあります ― 例えば、問題を訂正すること、代わりの取り組みを試みること、または失敗をユーザに知らせることによって。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.</span><!--end_enstr-->
<span class="jpstr">
４つの方法がエラーを取り扱うためにスウィフトにはあります。あなたは、エラーを関数からその関数を呼び出しているコードに伝えて、そのエラーを<code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文を使って取り扱う、エラーをオプショナルとして取り扱う、またはそのエラーは起こらないことを表明することができます。各取り組みは、以下の節で記述されます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">When a function throws an error, it changes the flow of your program, so it’s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the <code class="docutils literal notranslate"><span class="pre">try</span></code> keyword—or the <code class="docutils literal notranslate"><span class="pre">try?</span></code> or <code class="docutils literal notranslate"><span class="pre">try!</span></code> variation—before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.</span><!--end_enstr-->
<span class="jpstr">
ある関数がエラーをスローするとき、それはあなたのプログラムの流れを変えます、そのため重要なのは、あなたがすばやくあなたのコードの中のエラーをスローできる場所を識別することです。これらの場所をあなたのコードの中で識別するには、<code class="docutils literal notranslate"><span class="pre">try</span></code>キーワードを ― またはその変種<code class="docutils literal notranslate"><span class="pre">try?</span></code>または<code class="docutils literal notranslate"><span class="pre">try!</span></code>を ― エラーをスローできる関数、メソッド、またはイニシャライザを呼び出すコードの前の場所に書いてください。これらのキーワードは、以下の節で解説されます。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">Error handling in Swift resembles exception handling in other languages, with the use of the <code class="docutils literal notranslate"><span class="pre">try</span></code>, <code class="docutils literal notranslate"><span class="pre">catch</span></code> and <code class="docutils literal notranslate"><span class="pre">throw</span></code> keywords. Unlike exception handling in many languages—including Objective-C—error handling in Swift doesn’t involve unwinding the call stack, a process that can be computationally expensive. As such, the performance characteristics of a <code class="docutils literal notranslate"><span class="pre">throw</span></code> statement are comparable to those of a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</span><!--end_enstr-->
<span class="jpstr">
スウィフトにおけるエラー処理は、<code class="docutils literal notranslate"><span class="pre">try</span></code>、<code class="docutils literal notranslate"><span class="pre">catch</span></code>、そして<code class="docutils literal notranslate"><span class="pre">throw</span></code>キーワードの使用とともに、他の言語での例外処理に似ています。多くの言語 ― Objective-Cを含めて ― での例外処理と違い、スウィフトにおけるエラー処理はコールスタック、計算的に高くつく可能性がある処理、の巻き戻し（アンワインド）を必要としません。<code class="docutils literal notranslate"><span class="pre">throw</span></code>文のいろいろな性能特徴は、それ自体としては、<code class="docutils literal notranslate"><span class="pre">return</span></code>文のそれと同程度です。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID510">
<h3><span class="enstr">Propagating Errors Using Throwing Functions<a class="headerlink" href="#ID510" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
スロー関数を使ってエラーを伝える<a class="headerlink" href="#ID510" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h3>
<p><span class="enstr">To indicate that a function, method, or initializer can throw an error, you write the <code class="docutils literal notranslate"><span class="pre">throws</span></code> keyword in the function’s declaration after its parameters. A function marked with <code class="docutils literal notranslate"><span class="pre">throws</span></code> is called a <em>throwing function</em>. If the function specifies a return type, you write the <code class="docutils literal notranslate"><span class="pre">throws</span></code> keyword before the return arrow (<code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>).</span><!--end_enstr-->
<span class="jpstr">
エラーをスローすることのできる関数、メソッド、またはイニシャライザを指し示すために、あなたは<code class="docutils literal notranslate"><span class="pre">throws</span></code>キーワードを関数の定義においてそれのパラメータの後に書きます。<code class="docutils literal notranslate"><span class="pre">throws</span></code>で印された関数は、<em>スロー関数</em>と呼ばれます。その関数が戻り型を指定するならば、あなたは<code class="docutils literal notranslate"><span class="pre">throws</span></code>キーワードを戻り矢印（<code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>）の前に書きます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">canThrowErrors</span>() <span class="k">throws</span> -&gt; <span class="nc">String</span>
</li><li>
</li><li><span class="k">func</span> <span class="nv">cannotThrowErrors</span>() -&gt; <span class="nc">String</span>
</li></ol></div></div></div>
<p><span class="enstr">A throwing function propagates errors that are thrown inside of it to the scope from which it’s called.</span><!--end_enstr-->
<span class="jpstr">
スロー関数は、それの内部でスローされるエラーを、そこからそれが呼び出されるスコープへと伝えます。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">Only throwing functions can propagate errors. Any errors thrown inside a nonthrowing function must be handled inside the function.</span><!--end_enstr-->
<span class="jpstr">
スロー関数だけがエラーを伝えることができます。スローしない関数の内部でスローされるどんなエラーも、その関数の内部で取り扱われなければなりません。
</span><!--end_jpstr-->
</p>
</div>
<p><span class="enstr">In the example below, the <code class="docutils literal notranslate"><span class="pre">VendingMachine</span></code> class has a <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method that throws an appropriate <code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code> if the requested item isn’t available, is out of stock, or has a cost that exceeds the current deposited amount:</span><!--end_enstr-->
<span class="jpstr">
下の例において、<code class="docutils literal notranslate"><span class="pre">VendingMachine</span></code>クラスは<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドを持ちます、それは、要求された項目が利用可能でない、在庫切れ、または現在預け入れされた総額を超える価格を持つならば対応する<code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code>をスローします：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">struct</span> <span class="nv">Item</span> {
</li><li>    <span class="k">var</span> <span class="nv">price</span>: <span class="nc">Int</span>
</li><li>    <span class="k">var</span> <span class="nv">count</span>: <span class="nc">Int</span>
</li><li>}
</li><li>
</li><li><span class="k">class</span> <span class="nv">VendingMachine</span> {
</li><li>    <span class="k">var</span> <span class="nv">inventory</span> = [
</li><li>        <span class="s">"Candy Bar"</span>: <span class="nv">Item</span>(<span class="nv">price</span>: <span class="m">12</span>, <span class="nv">count</span>: <span class="m">7</span>),
</li><li>        <span class="s">"Chips"</span>: <span class="nv">Item</span>(<span class="nv">price</span>: <span class="m">10</span>, <span class="nv">count</span>: <span class="m">4</span>),
</li><li>        <span class="s">"Pretzels"</span>: <span class="nv">Item</span>(<span class="nv">price</span>: <span class="m">7</span>, <span class="nv">count</span>: <span class="m">11</span>)
</li><li>    ]
</li><li>    <span class="k">var</span> <span class="nv">coinsDeposited</span> = <span class="m">0</span>
</li><li>
</li><li>    <span class="k">func</span> <span class="nv">vend</span>(<span class="nv">itemNamed</span> <span class="nv">name</span>: <span class="nc">String</span>) <span class="k">throws</span> {
</li><li>        <span class="k">guard</span> <span class="k">let</span> <span class="nv">item</span> = <span class="nv">inventory</span>[<span class="nv">name</span>] <span class="k">else</span> {
</li><li>            <span class="k">throw</span> <span class="nv">VendingMachineError</span>.<span class="nv">invalidSelection</span>
</li><li>        }
</li><li>
</li><li>        <span class="k">guard</span> <span class="nv">item</span>.<span class="nv">count</span> &gt; <span class="m">0</span> <span class="k">else</span> {
</li><li>            <span class="k">throw</span> <span class="nv">VendingMachineError</span>.<span class="nv">outOfStock</span>
</li><li>        }
</li><li>
</li><li>        <span class="k">guard</span> <span class="nv">item</span>.<span class="nv">price</span> &lt;= <span class="nv">coinsDeposited</span> <span class="k">else</span> {
</li><li>            <span class="k">throw</span> <span class="nv">VendingMachineError</span>.<span class="nv">insufficientFunds</span>(<span class="nv">coinsNeeded</span>: <span class="nv">item</span>.<span class="nv">price</span> - <span class="nv">coinsDeposited</span>)
</li><li>        }
</li><li>
</li><li>        <span class="nv">coinsDeposited</span> -= <span class="nv">item</span>.<span class="nv">price</span>
</li><li>
</li><li>        <span class="k">var</span> <span class="nv">newItem</span> = <span class="nv">item</span>
</li><li>        <span class="nv">newItem</span>.<span class="nv">count</span> -= <span class="m">1</span>
</li><li>        <span class="nv">inventory</span>[<span class="nv">name</span>] = <span class="nv">newItem</span>
</li><li>
</li><li>        <span class="nv">print</span>(<span class="s">"Dispensing </span>\<span class="p">(</span><span class="nv">name</span><span class="p">)</span><span class="s">"</span>)
</li><li>    }
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The implementation of the <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method uses <code class="docutils literal notranslate"><span class="pre">guard</span></code> statements to exit the method early and throw appropriate errors if any of the requirements for purchasing a snack aren’t met. Because a <code class="docutils literal notranslate"><span class="pre">throw</span></code> statement immediately transfers program control, an item will be vended only if all of these requirements are met.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドの実装は<code class="docutils literal notranslate"><span class="pre">guard</span></code>文を使って、購入スナックに必要な何かが満たされないならば早めにそのメソッドを終了して対応するエラーをスローします。<code class="docutils literal notranslate"><span class="pre">throw</span></code>文が直ちにプログラム制御を移すので、これらの必要なものすべてが満たされる場合にのみ項目は販売されることになります。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Because the <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method propagates any errors it throws, any code that calls this method must either handle the errors—using a <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement, <code class="docutils literal notranslate"><span class="pre">try?</span></code>, or <code class="docutils literal notranslate"><span class="pre">try!</span></code>—or continue to propagate them. For example, the <code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code> in the example below is also a throwing function, and any errors that the <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method throws will propagate up to the point where the <code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code> function is called.</span><!--end_enstr-->
<span class="jpstr">
この<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドはそれがスローするどんなエラーも伝達するので、このメソッドを呼び出す何らかのコードは、それらのエラーを取り扱うか ― <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文、<code class="docutils literal notranslate"><span class="pre">try?</span></code>、または<code class="docutils literal notranslate"><span class="pre">try!</span></code>を使って ― またはそれらの伝達を続けるか、どちらかをしなければなりません。たとえば、下の例の<code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code>もまたスロー関数です、そして<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドがスローするあらゆるエラーは、<code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code>関数が呼び出される地点へとさかのぼり伝えられます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">favoriteSnacks</span> = [
</li><li>    <span class="s">"Alice"</span>: <span class="s">"Chips"</span>,
</li><li>    <span class="s">"Bob"</span>: <span class="s">"Licorice"</span>,
</li><li>    <span class="s">"Eve"</span>: <span class="s">"Pretzels"</span>,
</li><li>]
</li><li><span class="k">func</span> <span class="nv">buyFavoriteSnack</span>(<span class="nv">person</span>: <span class="nc">String</span>, <span class="nv">vendingMachine</span>: <span class="nc">VendingMachine</span>) <span class="k">throws</span> {
</li><li>    <span class="k">let</span> <span class="nv">snackName</span> = <span class="nv">favoriteSnacks</span>[<span class="nv">person</span>] ?? <span class="s">"Candy Bar"</span>
</li><li>    <span class="k">try</span> <span class="nv">vendingMachine</span>.<span class="nv">vend</span>(<span class="nv">itemNamed</span>: <span class="nv">snackName</span>)
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">In this example, the <code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:</span> <span class="pre">vendingMachine:)</span></code> function looks up a given person’s favorite snack and tries to buy it for them by calling the <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method. Because the <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> method can throw an error, it’s called with the <code class="docutils literal notranslate"><span class="pre">try</span></code> keyword in front of it.</span><!--end_enstr-->
<span class="jpstr">
この例において、<code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:</span> <span class="pre">vendingMachine:)</span></code>関数は指定された個人のお気に入りのスナックを探してそれを彼らのために仕入れることを<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドを呼ぶことによって試みます。<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>メソッドはエラーをスローできることから、それはそれの前の<code class="docutils literal notranslate"><span class="pre">try</span></code>キーワードとともに呼び出されます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Throwing initializers can propagate errors in the same way as throwing functions. For example, the initializer for the <code class="docutils literal notranslate"><span class="pre">PurchasedSnack</span></code> structure in the listing below calls a throwing function as part of the initialization process, and it handles any errors that it encounters by propagating them to its caller.</span><!--end_enstr-->
<span class="jpstr">
スローするイニシャライザは、スローする関数と同じ方法でエラーを伝達できます。例えば、以下のコード出力の<code class="docutils literal notranslate"><span class="pre">PurchasedSnack</span></code>構造体のためのイニシャライザは、スロー関数を初期化処理の一部として呼び出します、そしてそれは、それが遭遇するどんなエラーもそれの呼び出し側にそれらを伝達することによって取り扱います。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">struct</span> <span class="nv">PurchasedSnack</span> {
</li><li>    <span class="k">let</span> <span class="nv">name</span>: <span class="nc">String</span>
</li><li>    <span class="k">init</span>(<span class="nv">name</span>: <span class="nc">String</span>, <span class="nv">vendingMachine</span>: <span class="nc">VendingMachine</span>) <span class="k">throws</span> {
</li><li>        <span class="k">try</span> <span class="nv">vendingMachine</span>.<span class="nv">vend</span>(<span class="nv">itemNamed</span>: <span class="nv">name</span>)
</li><li>        <span class="k">self</span>.<span class="nv">name</span> = <span class="nv">name</span>
</li><li>    }
</li><li>}
</li></ol></div></div></div>
</div>
<div class="section" id="ID541">
<h3><span class="enstr">Handling Errors Using Do-Catch<a class="headerlink" href="#ID541" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
do-catchを使ってエラーを処理する<a class="headerlink" href="#ID541" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h3>
<p><span class="enstr">You use a <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement to handle errors by running a block of code. If an error is thrown by the code in the <code class="docutils literal notranslate"><span class="pre">do</span></code> clause, it’s matched against the <code class="docutils literal notranslate"><span class="pre">catch</span></code> clauses to determine which one of them can handle the error.</span><!--end_enstr-->
<span class="jpstr">
あなたは、あるコードの塊を実行することによってエラーを処理するために、<code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文を使います。あるエラーが<code class="docutils literal notranslate"><span class="pre">do</span></code>節の中にあるコードによってスローされるならば、それは<code class="docutils literal notranslate"><span class="pre">catch</span></code>節と照合されて、それらの１つがそのエラーを処理できると決定されます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Here is the general form of a <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement:</span><!--end_enstr-->
<span class="jpstr">
ここに<code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文の一般的な形式があります：
</span><!--end_jpstr-->
</p>
<div class="syntax-outline highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">do</span> {
</li><li>    <span class="k">try</span> <span class="gi">expression</span>
</li><li>    <span class="gi">statements</span>
</li><li>} <span class="k">catch</span> <span class="gi">pattern 1</span> {
</li><li>    <span class="gi">statements</span>
</li><li>} <span class="k">catch</span> <span class="gi">pattern 2</span> <span class="k">where</span> <span class="gi">condition</span> {
</li><li>    <span class="gi">statements</span>
</li><li>} <span class="k">catch</span> <span class="gi">pattern 3</span>, <span class="gi">pattern 4</span> <span class="k">where</span> <span class="gi">condition</span> {
</li><li>    <span class="gi">statements</span>
</li><li>} <span class="k">catch</span> {
</li><li>    <span class="gi">statements</span>
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">You write a pattern after <code class="docutils literal notranslate"><span class="pre">catch</span></code> to indicate what errors that clause can handle. If a <code class="docutils literal notranslate"><span class="pre">catch</span></code> clause doesn’t have a pattern, the clause matches any error and binds the error to a local constant named <code class="docutils literal notranslate"><span class="pre">error</span></code>. For more information about pattern matching, see <a class="reference internal" href="../ReferenceManual/Patterns.html"><span class="doc">Patterns</span></a>.</span><!--end_enstr-->
<span class="jpstr">
あなたは、<code class="docutils literal notranslate"><span class="pre">catch</span></code>の後にあるパターンを書いてどんなエラーをその節が取り扱えるかを指し示します。<code class="docutils literal notranslate"><span class="pre">catch</span></code>節がパターンを持たないならば、その節はあらゆるエラーにマッチします、そしてそのエラーを<code class="docutils literal notranslate"><span class="pre">error</span></code>と名前を付けられるローカル定数に束縛します。パターンマッチングについての更なる情報として、<a class="reference internal" href="../ReferenceManual/Patterns.html"><span class="doc">パターン</span></a>を見てください。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">For example, the following code matches against all three cases of the <code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code> enumeration.</span><!--end_enstr-->
<span class="jpstr">
例えば、以下のコードは<code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code>列挙の３つのケース節すべてに対して適合します。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">var</span> <span class="nv">vendingMachine</span> = <span class="nv">VendingMachine</span>()
</li><li><span class="nv">vendingMachine</span>.<span class="nv">coinsDeposited</span> = <span class="m">8</span>
</li><li><span class="k">do</span> {
</li><li>    <span class="k">try</span> <span class="nv">buyFavoriteSnack</span>(<span class="nv">person</span>: <span class="s">"Alice"</span>, <span class="nv">vendingMachine</span>: <span class="nv">vendingMachine</span>)
</li><li>    <span class="nv">print</span>(<span class="s">"Success! Yum."</span>)
</li><li>} <span class="k">catch</span> <span class="nv">VendingMachineError</span>.<span class="nv">invalidSelection</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Invalid Selection."</span>)
</li><li>} <span class="k">catch</span> <span class="nv">VendingMachineError</span>.<span class="nv">outOfStock</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Out of Stock."</span>)
</li><li>} <span class="k">catch</span> <span class="nv">VendingMachineError</span>.<span class="nv">insufficientFunds</span>(<span class="k">let</span> <span class="nv">coinsNeeded</span>) {
</li><li>    <span class="nv">print</span>(<span class="s">"Insufficient funds. Please insert an additional </span>\<span class="p">(</span><span class="nv">coinsNeeded</span><span class="p">)</span><span class="s"> coins."</span>)
</li><li>} <span class="k">catch</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unexpected error: </span>\<span class="p">(</span><span class="nv">error</span><span class="p">)</span><span class="s">."</span>)
</li><li>}
</li><li><span class="c"><span class="enstr">// Prints "Insufficient funds. Please insert an additional 2 coins."</span><!--end_enstr--><span class="jpstr">（「金額が不足しています。さらに２コイン入れてください。」を出力します）</span><!--end_jpstr--></span>
</li></ol></div></div></div>
<p><span class="enstr">In the above example, the <code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code> function is called in a <code class="docutils literal notranslate"><span class="pre">try</span></code> expression, because it can throw an error. If an error is thrown, execution immediately transfers to the <code class="docutils literal notranslate"><span class="pre">catch</span></code> clauses, which decide whether to allow propagation to continue. If no pattern is matched, the error gets caught by the final <code class="docutils literal notranslate"><span class="pre">catch</span></code> clause and is bound to a local <code class="docutils literal notranslate"><span class="pre">error</span></code> constant. If no error is thrown, the remaining statements in the <code class="docutils literal notranslate"><span class="pre">do</span></code> statement are executed.</span><!--end_enstr-->
<span class="jpstr">
上の例において、<code class="docutils literal notranslate"><span class="pre">buyFavoriteSnack(person:vendingMachine:)</span></code>関数は<code class="docutils literal notranslate"><span class="pre">try</span></code>式の中で呼び出されます、それがエラーをスローできるからです。エラーがスローされるならば、実行は直ちに<code class="docutils literal notranslate"><span class="pre">catch</span></code>節に移ります、それは伝達を継続させるかどうか結論を下します。パターンが適合することが全く無いならば、エラーは最後の<code class="docutils literal notranslate"><span class="pre">catch</span></code>節によってキャッチされて、あるローカル<code class="docutils literal notranslate"><span class="pre">error</span></code>定数に束縛されます。エラーがスローされることが全く無いならば、<code class="docutils literal notranslate"><span class="pre">do</span></code>文に残っている文が遂行されます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">catch</span></code> clauses don’t have to handle every possible error that the code in the <code class="docutils literal notranslate"><span class="pre">do</span></code> clause can throw. If none of the <code class="docutils literal notranslate"><span class="pre">catch</span></code> clauses handle the error, the error propagates to the surrounding scope. However, the propagated error must be handled by <em>some</em> surrounding scope. In a nonthrowing function, an enclosing <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement must handle the error. In a throwing function, either an enclosing <code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code> statement or the caller must handle the error. If the error propagates to the top-level scope without being handled, you’ll get a runtime error.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">catch</span></code>節は、<code class="docutils literal notranslate"><span class="pre">do</span></code>節の中のコードがスロー可能なすべての起こりうるエラーを取り扱う必要はありません。どの<code class="docutils literal notranslate"><span class="pre">catch</span></code>節もエラーを処理しないならば、エラーは周囲のスコープへと伝えられます。しかしながら、伝えられるエラーは周囲のスコープの<em>何れか</em>によって処理される必要があります。非スロー関数では、取り囲んでいる<code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文がエラーを処理しなければなりません。スロー関数では、取り囲んでいる<code class="docutils literal notranslate"><span class="pre">do</span></code>-<code class="docutils literal notranslate"><span class="pre">catch</span></code>文または呼び出し側のどちらかがエラーを処理しなければなりません。エラーが取り扱われることなくトップレベルスコープに伝わるならば、あなたは実行時エラーを得るでしょう。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">For example, the above example can be written so any error that isn’t a <code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code> is instead caught by the calling function:</span><!--end_enstr-->
<span class="jpstr">
例えば、上の例は<code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code>でないあらゆるエラーが、呼び出し側の関数によって代わりにキャッチされるように書かれることができます：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">nourish</span>(<span class="nv">with</span> <span class="nv">item</span>: <span class="nc">String</span>) <span class="k">throws</span> {
</li><li>    <span class="k">do</span> {
</li><li>        <span class="k">try</span> <span class="nv">vendingMachine</span>.<span class="nv">vend</span>(<span class="nv">itemNamed</span>: <span class="nv">item</span>)
</li><li>    } <span class="k">catch</span> <span class="k">is</span> <span class="nc">VendingMachineError</span> {
</li><li>        <span class="nv">print</span>(<span class="s">"Couldn't buy that from the vending machine."</span>)
</li><li>    }
</li><li>}
</li><li>
</li><li><span class="k">do</span> {
</li><li>    <span class="k">try</span> <span class="nv">nourish</span>(<span class="nv">with</span>: <span class="s">"Beet-Flavored Chips"</span>)
</li><li>} <span class="k">catch</span> {
</li><li>    <span class="nv">print</span>(<span class="s">"Unexpected non-vending-machine-related error: </span>\<span class="p">(</span><span class="nv">error</span><span class="p">)</span><span class="s">"</span>)
</li><li>}
</li><li><span class="c">// Prints "Couldn't buy that from the vending machine."</span>
</li></ol></div></div></div>
<p><span class="enstr">In the <code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code> function, if <code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code> throws an error that’s one of the cases of the <code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code> enumeration, <code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code> handles the error by printing a message. Otherwise, <code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code> propagates the error to its call site. The error is then caught by the general <code class="docutils literal notranslate"><span class="pre">catch</span></code> clause.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code>関数において、<code class="docutils literal notranslate"><span class="pre">vend(itemNamed:)</span></code>が<code class="docutils literal notranslate"><span class="pre">VendingMachineError</span></code>列挙のケース節の１つであるエラーをスローするならば、<code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code>はそのエラーをメッセージを出力することによって取り扱います。そうでなければ、<code class="docutils literal notranslate"><span class="pre">nourish(with:)</span></code>はそのエラーをそれの呼出地点へと伝達します。エラーは、それから一般的な<code class="docutils literal notranslate"><span class="pre">catch</span></code>節によってキャッチされます。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Another way to catch several related errors is to list them after <code class="docutils literal notranslate"><span class="pre">catch</span></code>, separated by commas. For example:</span><!--end_enstr-->
<span class="jpstr">
いくつかの関連したエラーをキャッチする別の方法は、それらを<code class="docutils literal notranslate"><span class="pre">catch</span></code>の後に、コンマで区切って列記することになります。例えば：
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">eat</span>(<span class="nv">item</span>: <span class="nc">String</span>) <span class="k">throws</span> {
</li><li>    <span class="k">do</span> {
</li><li>        <span class="k">try</span> <span class="nv">vendingMachine</span>.<span class="nv">vend</span>(<span class="nv">itemNamed</span>: <span class="nv">item</span>)
</li><li>    } <span class="k">catch</span> <span class="nv">VendingMachineError</span>.<span class="nv">invalidSelection</span>, <span class="nv">VendingMachineError</span>.<span class="nv">insufficientFunds</span>, <span class="nv">VendingMachineError</span>.<span class="nv">outOfStock</span> {
</li><li>        <span class="nv">print</span>(<span class="s">"Invalid selection, out of stock, or not enough money."</span>)
</li><li>    }
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The <code class="docutils literal notranslate"><span class="pre">eat(item:)</span></code> function lists the vending machine errors to catch, and its error text corresponds to the items in that list. If any of the three listed errors are thrown, this <code class="docutils literal notranslate"><span class="pre">catch</span></code> clause handles them by printing a message. Any other errors are propagated to the surrounding scope, including any vending-machine errors that might be added later.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">eat(item:)</span></code>関数は、自動販売機エラーそれらをリストしてキャッチします、そしてそれのエラーテキストをそのリストの中の項目と結び付けます。３つのリストされたエラーのどれかがスローされるならば、この<code class="docutils literal notranslate"><span class="pre">catch</span></code>節はそれらをあるメッセージを出力することによって取り扱います。何らかの他のエラーは、周囲のスコープに伝播されます、後で加えられるかもしれないあらゆる自動販売機エラーを含めて。
</span><!--end_jpstr-->
</p>
</div>
<div class="section" id="ID542">
<h3><span class="enstr">Converting Errors to Optional Values<a class="headerlink" href="#ID542" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
エラーをオプショナルの値に変換する<a class="headerlink" href="#ID542" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h3>
<p><span class="enstr">You use <code class="docutils literal notranslate"><span class="pre">try?</span></code> to handle an error by converting it to an optional value. If an error is thrown while evaluating the <code class="docutils literal notranslate"><span class="pre">try?</span></code> expression, the value of the expression is <code class="docutils literal notranslate"><span class="pre">nil</span></code>. For example, in the following code <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> have the same value and behavior:</span><!--end_enstr-->
<span class="jpstr">
あなたは、<code class="docutils literal notranslate"><span class="pre">try?</span></code>を使って、あるエラーをオプショナルの値に変換することによって取り扱うことができます。<code class="docutils literal notranslate"><span class="pre">try?</span></code>式を評価している間にエラーがスローされるならば、式の値は<code class="docutils literal notranslate"><span class="pre">nil</span></code>になります。例えば、以下のコードにおいて<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>は、同じ値と挙動を持ちます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">someThrowingFunction</span>() <span class="k">throws</span> -&gt; <span class="nc">Int</span> {
</li><li>    <span class="c">// ...</span>
</li><li>}
</li><li>
</li><li><span class="k">let</span> <span class="nv">x</span> = <span class="k">try</span>? <span class="nv">someThrowingFunction</span>()
</li><li>
</li><li><span class="k">let</span> <span class="nv">y</span>: <span class="nc">Int</span>?
</li><li><span class="k">do</span> {
</li><li>    <span class="nv">y</span> = <span class="k">try</span> <span class="nv">someThrowingFunction</span>()
</li><li>} <span class="k">catch</span> {
</li><li>    <span class="nv">y</span> = <span class="k">nil</span>
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">If <code class="docutils literal notranslate"><span class="pre">someThrowingFunction()</span></code> throws an error, the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> is <code class="docutils literal notranslate"><span class="pre">nil</span></code>. Otherwise, the value of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> is the value that the function returned. Note that <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are an optional of whatever type <code class="docutils literal notranslate"><span class="pre">someThrowingFunction()</span></code> returns. Here the function returns an integer, so <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are optional integers.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">someThrowingFunction()</span></code>がエラーをスローするならば、<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>の値は<code class="docutils literal notranslate"><span class="pre">nil</span></code>です。そうでなければ、<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>の値はこの関数が返す値です。<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>は、たとえどんなものでも<code class="docutils literal notranslate"><span class="pre">someThrowingFunction()</span></code>が返す型のオプショナルです。ここに整数を返す関数があります、それで<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>はオプショナル整数です。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">Using <code class="docutils literal notranslate"><span class="pre">try?</span></code> lets you write concise error handling code when you want to handle all errors in the same way. For example, the following code uses several approaches to fetch data, or returns <code class="docutils literal notranslate"><span class="pre">nil</span></code> if all of the approaches fail.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">try?</span></code>を使うことで、あなたに簡潔なエラー処理コードを書くことを可能にするのは、あなたがすべてのエラーを同じやり方で取り扱いたい時です。例えば、以下のコードはいくつかの取り組みを使ってデータを取ってきます、またはすべての取り組みが失敗するならば<code class="docutils literal notranslate"><span class="pre">nil</span></code>を返します。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">fetchData</span>() -&gt; <span class="nc">Data</span>? {
</li><li>    <span class="k">if</span> <span class="k">let</span> <span class="nv">data</span> = <span class="k">try</span>? <span class="nv">fetchDataFromDisk</span>() { <span class="k">return</span> <span class="nv">data</span> }
</li><li>    <span class="k">if</span> <span class="k">let</span> <span class="nv">data</span> = <span class="k">try</span>? <span class="nv">fetchDataFromServer</span>() { <span class="k">return</span> <span class="nv">data</span> }
</li><li>    <span class="k">return</span> <span class="k">nil</span>
</li><li>}
</li></ol></div></div></div>
</div>
<div class="section" id="ID513">
<h3><span class="enstr">Disabling Error Propagation<a class="headerlink" href="#ID513" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
エラー伝達を抑制する<a class="headerlink" href="#ID513" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h3>
<p><span class="enstr">Sometimes you know a throwing function or method won’t, in fact, throw an error at runtime. On those occasions, you can write <code class="docutils literal notranslate"><span class="pre">try!</span></code> before the expression to disable error propagation and wrap the call in a runtime assertion that no error will be thrown. If an error actually is thrown, you’ll get a runtime error.</span><!--end_enstr-->
<span class="jpstr">
時にはあなたはあるスロー関数またはメソッドが、実際のところ、実行時にエラーをスローすることがないのを知っています。これらの場合には、あなたは<code class="docutils literal notranslate"><span class="pre">try!</span></code>をその式の前に書くことによって、エラー伝達を抑制して、エラーはスローされないという実行時表明の中にその呼び出しを包み込みます。エラーが実際はスローされるならば、あなたは実行時エラーを受け取るでしょう。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">For example, the following code uses a <code class="docutils literal notranslate"><span class="pre">loadImage(atPath:)</span></code> function, which loads the image resource at a given path or throws an error if the image can’t be loaded. In this case, because the image is shipped with the application, no error will be thrown at runtime, so it’s appropriate to disable error propagation.</span><!--end_enstr-->
<span class="jpstr">
例えば、以下のコードは<code class="docutils literal notranslate"><span class="pre">loadImage(atPath:)</span></code>関数を使います、それは画像リソースを与えられたパスでロードします、または画像がロードできないならばエラーをスローします。この場合、画像はアプリケーションとともに出荷されるので、エラーが実行時にスローされることはありません、それでふさわしいのはエラー伝達を抑制することです。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">let</span> <span class="nv">photo</span> = <span class="k">try</span>! <span class="nv">loadImage</span>(<span class="nv">atPath</span>: <span class="s">"./Resources/John Appleseed.jpg"</span>)
</li></ol></div></div></div>
</div>
</div>
<div class="section" id="ID514">
<h2><span class="enstr">Specifying Cleanup Actions<a class="headerlink" href="#ID514" title="Permalink to this headline">¶</a></span><!--end_enstr-->
<span class="jpstr">
クリーンアップ動作の指定<a class="headerlink" href="#ID514" title="Permalink to this headline">¶</a>
</span><!--end_jpstr-->
</h2>
<p><span class="enstr">You use a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement to execute a set of statements just before code execution leaves the current block of code. This statement lets you do any necessary cleanup that should be performed regardless of <em>how</em> execution leaves the current block of code—whether it leaves because an error was thrown or because of a statement such as <code class="docutils literal notranslate"><span class="pre">return</span></code> or <code class="docutils literal notranslate"><span class="pre">break</span></code>. For example, you can use a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement to ensure that file descriptors are closed and manually allocated memory is freed.</span><!--end_enstr-->
<span class="jpstr">
あなたは<code class="docutils literal notranslate"><span class="pre">defer</span></code>文を使うことで、コード実行が現在のコードブロックから離れる直前に一揃いの文を実行するようにします。この文は、あなたに何らかの不可欠なクリーンアップを行わせます、それは<em>どうやって</em>実行が現在のコードブロックから離れるか ― それがエラーがスローされたためにまたは<code class="docutils literal notranslate"><span class="pre">return</span></code>または<code class="docutils literal notranslate"><span class="pre">break</span></code>のような文を理由に離れるかどうかに関係なく実行されるべきものです。例えば、あなたは<code class="docutils literal notranslate"><span class="pre">defer</span></code>文を使ってファイル記述子が閉じられて手動割り当てメモリが解放されることを確実にします。
</span><!--end_jpstr-->
</p>
<p><span class="enstr">A <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement defers execution until the current scope is exited. This statement consists of the <code class="docutils literal notranslate"><span class="pre">defer</span></code> keyword and the statements to be executed later. The deferred statements may not contain any code that would transfer control out of the statements, such as a <code class="docutils literal notranslate"><span class="pre">break</span></code> or a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement, or by throwing an error. Deferred actions are executed in the reverse of the order that they’re written in your source code. That is, the code in the first <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement executes last, the code in the second <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement executes second to last, and so on. The last <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement in source code order executes first.</span><!--end_enstr-->
<span class="jpstr">
<code class="docutils literal notranslate"><span class="pre">defer</span></code>文は、現在のスコープが終了されるまで実行を延期します。この文は、<code class="docutils literal notranslate"><span class="pre">defer</span></code>キーワードと後で実行される文から成ります。延期される文は、制御をその文の外に、例えば<code class="docutils literal notranslate"><span class="pre">break</span></code>や<code class="docutils literal notranslate"><span class="pre">return</span></code>文、またはエラーをスローすることによって移すいかなるコードも含んではいけません。延期された動作は、それらがあなたのソースコードに書かれた順序の逆に実行されます。すなわち、最初の<code class="docutils literal notranslate"><span class="pre">defer</span></code>文のコードが最後に実行され、２番目の<code class="docutils literal notranslate"><span class="pre">defer</span></code>文のコードが最後から２番目に実行され、等々。ソースコード順序での最後の<code class="docutils literal notranslate"><span class="pre">defer</span></code>文は最初に実行されます。
</span><!--end_jpstr-->
</p>
<div class="highlight-swift notranslate"><div class="code-sample"><div class="Swift highlight"><ol class="code-lines"><li><span class="k">func</span> <span class="nv">processFile</span>(<span class="nv">filename</span>: <span class="nc">String</span>) <span class="k">throws</span> {
</li><li>    <span class="k">if</span> <span class="nv">exists</span>(<span class="nv">filename</span>) {
</li><li>        <span class="k">let</span> <span class="nv">file</span> = <span class="nv">open</span>(<span class="nv">filename</span>)
</li><li>        <span class="k">defer</span> {
</li><li>            <span class="nv">close</span>(<span class="nv">file</span>)
</li><li>        }
</li><li>        <span class="k">while</span> <span class="k">let</span> <span class="nv">line</span> = <span class="k">try</span> <span class="nv">file</span>.<span class="nv">readline</span>() {
</li><li>            <span class="c"><span class="enstr">// Work with the file.</span><!--end_enstr--><span class="jpstr">（ファイル処理。）</span><!--end_jpstr--></span>
</li><li>        }
</li><li>        <span class="c"><span class="enstr">// close(file) is called here, at the end of the scope.</span><!--end_enstr--><span class="jpstr">（close(file)がここで呼ばれます、このスコープの終わりで。）</span><!--end_jpstr--></span>
</li><li>    }
</li><li>}
</li></ol></div></div></div>
<p><span class="enstr">The above example uses a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement to ensure that the <code class="docutils literal notranslate"><span class="pre">open(_:)</span></code> function has a corresponding call to <code class="docutils literal notranslate"><span class="pre">close(_:)</span></code>.</span><!--end_enstr-->
<span class="jpstr">
上の例は、<code class="docutils literal notranslate"><span class="pre">defer</span></code>文を使って、<code class="docutils literal notranslate"><span class="pre">open(_:)</span></code>関数がそれと対応する<code class="docutils literal notranslate"><span class="pre">close(_:)</span></code>への呼び出しを持つことを確実にします。
</span><!--end_jpstr-->
</p>
<div class="admonition note">
<p class="first admonition-title"><span class="enstr">Note</span><!--end_enstr-->
<span class="jpstr">
注意
</span><!--end_jpstr-->
</p>
<p class="last"><span class="enstr">You can use a <code class="docutils literal notranslate"><span class="pre">defer</span></code> statement even when no error handling code is involved.</span><!--end_enstr-->
<span class="jpstr">
あなたは、<code class="docutils literal notranslate"><span class="pre">defer</span></code>文を使うことが、エラー処理コードを伴わない時でさえも可能です。
</span><!--end_jpstr-->
</p>
</div>
</div>
</div>


    </article>
    <div class="next_previous">
        <p class="previous"><a href="OptionalChaining.html"><span class="enstr">Optional Chaining</span><!--end_enstr-->
<span class="jpstr">
オプショナル連鎖
</span><!--end_jpstr-->
</a></p>
        <p class="next"><a href="Concurrency.html"><span class="enstr">Concurrency</span><!--end_enstr-->
<span class="jpstr">
並行性
</span><!--end_jpstr-->
</a></p>
    </div>
</main>


<footer role="contentinfo">
  <aside>
    <a href="//swift.org/atom.xml" title="Subscribe to Site Updates"><i class="feed">Subscribe</i></a>
    <a href="https://twitter.com/swiftlang" rel="nofollow" title="Follow @SwiftLang on Twitter"><i class="twitter">Twitter</i></a>
  </aside>

  <p class="copyright">Copyright © 2021 Apple Inc. All rights reserved.</p>
  <p class="trademark">Swift and the Swift logo are trademarks of Apple Inc.</p>
  <p class="privacy">
    <a href="//www.apple.com/privacy/privacy-policy/">Privacy Policy</a>
    <a href="//www.apple.com/legal/privacy/en-ww/cookies/">Cookies</a>
  </p>
</footer>
<div id="jump_to_overlay"></div>
<script src="../static/javascripts/application.js"></script>
  </body>
</html>